<!doctype html>
<html>
<head>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">

  <!-- Use title if it's in the page YAML frontmatter -->
  <title>Using HAWQ to Query Data | Pivotal HD Docs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link href="stylesheets/master.css" media="screen,print" rel="stylesheet" type="text/css" />
  <link href="stylesheets/print.css" media="print" rel="stylesheet" type="text/css" />
  <link href='http://www.pivotal.io/misc/favicon.ico' rel='shortcut icon'>
  <script src="javascripts/all.js" type="text/javascript"></script>
  
  <script type="text/javascript">
    if (window.location.host === 'docs.pivotal.io') {
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-39702075-1']);
      _gaq.push(['_setDomainName', 'pivotal.io']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    }
  </script>
  <!-- Confluence HTML stylesheet -->
   <link href="stylesheets/site-conf.css" media="screen,print" rel="stylesheet"  type="text/css" /> 
   
   <!-- Left-navigation code -->
    <link href="stylesheets/dcaccordion.css" rel="stylesheet" type="text/css" />
    <!--End left-navigation code -->
   
</head>

<body class="pivotalhd pivotalhd_getstarted pivotalhd_getstarted_phd-docs has-subnav">

<div class="viewport">
<div class='wrap'>
  <script src="//use.typekit.net/clb0qji.js" type="text/javascript"></script>
  <script type="text/javascript">
      try {
          Typekit.load();
      } catch (e) {
      }
  </script>
  <script type="text/javascript">
      document.domain = "pivotal.io";
  </script>

  <script type="text/javascript">
    WebFontConfig = {
      google: { families: [ 'Source+Sans+Pro:300italic,400italic,300,400,600:latin' ] }
    };
    (function() {
      var wf = document.createElement('script');
      wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
        '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
      wf.type = 'text/javascript';
      wf.async = 'true';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(wf, s);
    })();
  </script>
   
    <header class="header header-layout">
      <h1 class="logo">
        <a href="index.html">Pivotal HD Documentation</a> v2.1.0
      </h1>
      <div class="header-links js-bar-links">
        <div class="btn-menu" data-behavior="MenuMobile"></div>
        <div class="header-item">
          <a href="http://docs.pivotal.io">Docs Home</a>
        </div>
        <div class="header-item">
          <a href="http://support.pivotal.io" target="_blank">Support</a>
        </div>
        <div class="header-item searchbar js-searchbar">
          <a class="search-icon" data-behavior="Search"></a>
          <div class="search-input">
            <!-- Google CSE Search Box -->
            <div class="search-input-inner" id="docs-search">
                <gcse:search></gcse:search>
            </div>
          </div>
        </div>
      </div>
    </header>
    
    <div class="container">
    
	<!--INSERT SIDENAV -->
	<div id="sub-nav" class="nav-container">

         <p class="productname"><a href="PivotalHD.html">Pivotal HD</a></p>
         <ul>
            <li>
               <a href="PHDEnterprise2.1.0ReleaseNotes.html">PHD Enterprise 2.1.0 Release Notes</a>
            </li>
            <li>
               <a href="PHDInstallationandAdministration.html">PHD Installation and Administration</a>
               <ul>
                  <li>
                     <a href="OverviewofPHD.html">Overview of PHD</a>
                  </li>
                  <li>
                     <a href="InstallationOverview.html">Installation Overview</a>
                     <ul>
                        <li>
                           <a href="CommandLineInstallationFeatures.html">Command Line Installation Features</a>
                        </li>
                        <li>
                           <a href="DeploymentOptions.html">Deployment Options</a>
                        </li>
                        <li>
                           <a href="PlanningyourPHDClusterDeployment.html">Planning your PHD Cluster Deployment</a>
                        </li>
                        <li>
                           <a href="BestPracticesforSelectingHardware.html">Best Practices for Selecting Hardware</a>
                        </li>
                        <li>
                           <a href="BestPracticesforDeployingHadoopServices.html">Best Practices for Deploying Hadoop Services</a>
                        </li>
                        <li>
                           <a href="HighAvailabilityBestPractices.html">High Availability Best Practices</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="PHDInstallationPrerequisites.html">PHD Installation Prerequisites</a>
                     <ul>
                        <li>
                           <a href="BeforeYouBeginInstallingPHD.html">Before You Begin Installing PHD</a>
                        </li>
                        <li>
                           <a href="PHDPrerequisiteChecklist.html">PHD Prerequisite Checklist</a>
                        </li>
                        <li>
                           <a href="PHD-DNSLookup.html">PHD - DNS Lookup</a>
                        </li>
                        <li>
                           <a href="PHD-JAVAJDK.html">PHD - JAVA JDK</a>
                        </li>
                        <li>
                           <a href="PHD-VerifyPackageAccessibility.html">PHD - Verify Package Accessibility</a>
                        </li>
                        <li>
                           <a href="PHD-TurnOffiptables.html">PHD - Turn Off iptables</a>
                        </li>
                        <li>
                           <a href="PHD-DisableSELinux.html">PHD - Disable SELinux</a>
                        </li>
                        <li>
                           <a href="EPELYumRepository.html">EPEL Yum Repository</a>
                        </li>
                        <li>
                           <a href="SudoConfigurationFiles.html">Sudo Configuration Files</a>
                        </li>
                        <li>
                           <a href="FQDN.html">FQDN</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="InstallingPHDUsingtheCLI.html">Installing PHD Using the CLI</a>
                     <ul>
                        <li>
                           <a href="PHDInstallationChecklist.html">PHD Installation Checklist</a>
                        </li>
                        <li>
                           <a href="InstallingPivotalCommandCenter.html">Installing Pivotal Command Center</a>
                        </li>
                        <li>
                           <a href="ConfiguringKerberosandLDAP.html">Configuring Kerberos and LDAP</a>
                        </li>
                        <li>
                           <a href="PHD-ImportingthePackages.html">PHD - Importing the Packages</a>
                        </li>
                        <li>
                           <a href="EditingtheClusterConfigurationFiles.html">Editing the Cluster Configuration Files</a>
                        </li>
                        <li>
                           <a href="EditingtheHAWQConfigurationFile.html">Editing the HAWQ Configuration File</a>
                        </li>
                        <li>
                           <a href="ForPXFwithGemFireXD.html">For PXF with GemFire XD</a>
                        </li>
                        <li>
                           <a href="DeployingtheCluster.html">Deploying the Cluster</a>
                        </li>
                        <li>
                           <a href="StartingtheCluster.html">Starting the Cluster</a>
                        </li>
                        <li>
                           <a href="InitializingandStartingHAWQ.html">Initializing and Starting HAWQ</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="PHDPost-Installation.html">PHD Post-Installation</a>
                     <ul>
                        <li>
                           <a href="VerifyingPHDServiceStatus.html">Verifying PHD Service Status</a>
                        </li>
                        <li>
                           <a href="RunningPHDSamplePrograms.html">Running PHD Sample Programs</a>
                        </li>
                        <li>
                           <a href="Post-InstallationReferenceInformation.html">Post-Installation Reference Information</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="PHDUpgradePrerequisites.html">PHD Upgrade Prerequisites</a>
                     <ul>
                        <li>
                           <a href="UpgradePrerequisiteChecklist.html">Upgrade Prerequisite Checklist</a>
                        </li>
                        <li>
                           <a href="FileLocationsandBackups.html">File Locations and Backups</a>
                        </li>
                        <li>
                           <a href="VerifyJavaJDK.html">Verify Java JDK</a>
                        </li>
                        <li>
                           <a href="CompactHBaseTables.html">Compact HBase Tables</a>
                        </li>
                        <li>
                           <a href="SudoConfigurationFile.html">Sudo Configuration File</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="UpgradingPHD2.0.xto2.1.0.html">Upgrading PHD 2.0.x to 2.1.0</a>
                     <ul>
                        <li>
                           <a href="PHDUpgradeChecklist-2.0.xto2.1.0.html">PHD Upgrade Checklist - 2.0.x to 2.1.0</a>
                        </li>
                        <li>
                           <a href="UpgradeInstructions-2.0.xto2.1.0.html">Upgrade Instructions - 2.0.x to 2.1.0</a>
                        </li>
                        <li>
                           <a href="MovingHAWQFilespacetoHA-enabledHDFS-2.0.xto2.1.0.html">Moving HAWQ Filespace to HA-enabled HDFS - 2.0.x to 2.1.0</a>
                        </li>
                        <li>
                           <a href="UpgradeReferenceInformation-2.0.xto2.1.0.html">Upgrade Reference Information - 2.0.x to 2.1.0</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="UpgradingPHDfrom1.1.1to2.1.0.html">Upgrading PHD from 1.1.1 to 2.1.0</a>
                     <ul>
                        <li>
                           <a href="UpgradeChecklist-1.1.1to2.1.0.html">Upgrade Checklist - 1.1.1 to 2.1.0</a>
                        </li>
                        <li>
                           <a href="UpgradeInstructions-1.1.1to2.1.0.html">Upgrade Instructions - 1.1.1 to 2.1.0</a>
                        </li>
                        <li>
                           <a href="MovingHAWQFilespacetoHA-enabledHDFS-1.1.1to2.1.0.html">Moving HAWQ Filespace to HA-enabled HDFS - 1.1.1 to 2.1.0</a>
                        </li>
                        <li>
                           <a href="UpgradeReferenceInformation-1.1.1to2.1.0.html">Upgrade Reference Information - 1.1.1 to 2.1.0</a>
                        </li>
                        <li>
                           <a href="DisablingSecurityona1.1.1Cluster.html">Disabling Security on a 1.1.1 Cluster</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="AdministeringPHDUsingtheCLI.html">Administering PHD Using the CLI</a>
                     <ul>
                        <li>
                           <a href="ManagingaPHDCluster.html">Managing a PHD Cluster</a>
                           <ul>
                              <li>
                                 <a href="StartingaCluster.html">Starting a Cluster</a>
                              </li>
                              <li>
                                 <a href="StoppingaCluster.html">Stopping a Cluster</a>
                              </li>
                              <li>
                                 <a href="RestartingaCluster.html">Restarting a Cluster</a>
                              </li>
                              <li>
                                 <a href="ReconfiguringaCluster.html">Reconfiguring a Cluster</a>
                              </li>
                              <li>
                                 <a href="AddingRemovingServices.html">Adding/Removing Services</a>
                              </li>
                              <li>
                                 <a href="AddingHoststoaCluster.html">Adding Hosts to a Cluster</a>
                              </li>
                              <li>
                                 <a href="RetrievingInformationaboutaDeployedCluster.html">Retrieving Information about a Deployed Cluster</a>
                              </li>
                              <li>
                                 <a href="ListingClusters.html">Listing Clusters</a>
                              </li>
                              <li>
                                 <a href="ExpandingaCluster.html">Expanding a Cluster</a>
                              </li>
                              <li>
                                 <a href="ShrinkingaCluster.html">Shrinking a Cluster</a>
                              </li>
                              <li>
                                 <a href="DecommissioningSlaveNodes.html">Decommissioning Slave Nodes</a>
                                 <ul>
                                    <li>
                                       <a href="DecommissionNodesOverview.html">Decommission Nodes Overview</a>
                                    </li>
                                    <li>
                                       <a href="DecommissioningtheDataNode.html">Decommissioning the Data Node</a>
                                    </li>
                                    <li>
                                       <a href="DecommissioningtheYARNNodeManager.html">Decommissioning the YARN NodeManager</a>
                                    </li>
                                    <li>
                                       <a href="ShuttingDowntheSlaveNode.html">Shutting Down the Slave Node</a>
                                    </li>
                                    <li>
                                       <a href="ReplacingtheSlaveNode.html">Replacing the Slave Node</a>
                                    </li>
                                    <li>
                                       <a href="ReplacingtheSlaveNodeDisk.html">Replacing the Slave Node Disk</a>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <a href="HighAvailability.html">High Availability</a>
                                 <ul>
                                    <li>
                                       <a href="DisablingHighAvailability.html">Disabling High Availability</a>
                                    </li>
                                    <li>
                                       <a href="EnablingRe-enablingHighAvailability.html">Enabling/Re-enabling High Availability</a>
                                    </li>
                                    <li>
                                       <a href="HighAvailabilityCommandReference.html">High Availability Command Reference</a>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <a href="SecurityKerberosAuthentication.html">Security/Kerberos Authentication</a>
                                 <ul>
                                    <li>
                                       <a href="EnablingKerberosAuthentication.html">Enabling Kerberos Authentication</a>
                                    </li>
                                    <li>
                                       <a href="DisablingKerberosAuthentication.html">Disabling Kerberos Authentication</a>
                                    </li>
                                    <li>
                                       <a href="SecureModeCommands.html">Secure Mode Commands</a>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <a href="UninstallingaCluster.html">Uninstalling a Cluster</a>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <a href="ManagingHAWQ.html">Managing HAWQ</a>
                           <ul>
                              <li>
                                 <a href="InitializingHAWQ.html">Initializing HAWQ</a>
                              </li>
                              <li>
                                 <a href="StartingHAWQ.html">Starting HAWQ</a>
                              </li>
                              <li>
                                 <a href="StoppingHAWQ.html">Stopping HAWQ</a>
                              </li>
                              <li>
                                 <a href="ModifyingHAWQUserConfiguration.html">Modifying HAWQ User Configuration</a>
                              </li>
                              <li>
                                 <a href="ExpandingHAWQ.html">Expanding HAWQ</a>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <a href="ManagingPHDRolesandHosts.html">Managing PHD Roles and Hosts</a>
                        </li>
                        <li>
                           <a href="PHDServicesReference.html">PHD Services Reference</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="PHDFAQ-FrequentlyAskedQuestions.html">PHD FAQ - Frequently Asked Questions</a>
                  </li>
                  <li>
                     <a href="PHDTroubleshooting.html">PHD Troubleshooting</a>
                  </li>
                  <li>
                     <a href="PHDRESTAPIs.html">PHD REST APIs</a>
                     <ul>
                        <li>
                           <a href="SwaggerwithOAuth.html">Swagger with OAuth</a>
                        </li>
                        <li>
                           <a href="ListofPHDRESTAPIs.html">List of PHD REST APIs</a>
                        </li>
                     </ul>
                  </li>
               </ul>
            </li>
            <li>
               <a href="StackandToolsReference.html">Stack and Tools Reference</a>
               <ul>
                  <li>
                     <a href="OverviewofApacheStackandPivotalComponents.html">Overview of Apache Stack and Pivotal Components</a>
                  </li>
                  <li>
                     <a href="ManuallyInstallingandUsingPivotalHD2.1Stack.html">Manually Installing and Using Pivotal HD 2.1 Stack</a>
                     <ul>
                        <li>
                           <a href="DistributionContents.html">Distribution Contents</a>
                        </li>
                        <li>
                           <a href="ApacheConfigurationReference.html">Apache Configuration Reference</a>
                        </li>
                        <li>
                           <a href="AccessingPHD2.1.html">Accessing PHD 2.1</a>
                        </li>
                        <li>
                           <a href="HadoopHDFS.html">Hadoop HDFS</a>
                        </li>
                        <li>
                           <a href="HadoopYARN.html">Hadoop YARN</a>
                        </li>
                        <li>
                           <a href="HadoopPseudo-distributedConfiguration.html">Hadoop Pseudo-distributed Configuration</a>
                        </li>
                        <li>
                           <a href="Zookeeper.html">Zookeeper</a>
                        </li>
                        <li>
                           <a href="HBase.html">HBase</a>
                        </li>
                        <li>
                           <a href="Hive.html">Hive</a>
                        </li>
                        <li>
                           <a href="HCatalog.html">HCatalog</a>
                        </li>
                        <li>
                           <a href="Pig.html">Pig</a>
                        </li>
                        <li>
                           <a href="Mahout.html">Mahout</a>
                        </li>
                        <li>
                           <a href="Flume.html">Flume</a>
                        </li>
                        <li>
                           <a href="Sqoop.html">Sqoop</a>
                        </li>
                        <li>
                           <a href="Oozie.html">Oozie</a>
                        </li>
                        <li>
                           <a href="GraphLab.html">GraphLab</a>
                        </li>
                        <li>
                           <a href="Hamster.html">Hamster</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="ManuallyUpgradingPivotalHDStacktoPHD2.1.html">Manually Upgrading Pivotal HD Stack to PHD 2.1</a>
                  </li>
                  <li>
                     <a href="PivotalHadoopEnhancements.html">Pivotal Hadoop Enhancements</a>
                  </li>
                  <li>
                     <a href="Security.html">Security</a>
                     <ul>
                        <li>
                           <a href="SecurityOverview.html">Security Overview</a>
                        </li>
                        <li>
                           <a href="KerberosSetup.html">Kerberos Setup</a>
                        </li>
                        <li>
                           <a href="LDAPSetup.html">LDAP Setup</a>
                        </li>
                        <li>
                           <a href="ConfiguringKerberosforHDFSandYARNMapReduce.html">Configuring Kerberos for HDFS and YARN (MapReduce)</a>
                        </li>
                        <li>
                           <a href="ConfiguringKerberosforHDFSHighAvailability.html">Configuring Kerberos for HDFS High Availability</a>
                        </li>
                        <li>
                           <a href="ConfiguringSecureZookeeper.html">Configuring Secure Zookeeper</a>
                        </li>
                        <li>
                           <a href="ConfiguringSecureHBase.html">Configuring Secure HBase</a>
                        </li>
                        <li>
                           <a href="ConfiguringSecureHive.html">Configuring Secure Hive</a>
                        </li>
                        <li>
                           <a href="ConfiguringHCatalogWebHCatonSecureHive.html">Configuring HCatalog (WebHCat) on Secure Hive</a>
                        </li>
                        <li>
                           <a href="ConfiguringHAWQonSecureHDFS.html">Configuring HAWQ on Secure HDFS</a>
                        </li>
                        <li>
                           <a href="EnablingAuditing.html">Enabling Auditing</a>
                        </li>
                        <li>
                           <a href="SecureWebAccess.html">Secure Web Access</a>
                        </li>
                        <li>
                           <a href="SecureWebAccessviaHttpFS.html">Secure Web Access via HttpFS</a>
                        </li>
                        <li>
                           <a href="ConfiguringSecureFlume.html">Configuring Secure Flume</a>
                        </li>
                        <li>
                           <a href="ConfiguringSecureOozie.html">Configuring Secure Oozie</a>
                        </li>
                        <li>
                           <a href="ConfiguringSecureSqoop.html">Configuring Secure Sqoop</a>
                        </li>
                        <li>
                           <a href="ConfiguringSecurePig.html">Configuring Secure Pig</a>
                        </li>
                        <li>
                           <a href="ConfiguringSecureMahout.html">Configuring Secure Mahout</a>
                        </li>
                        <li>
                           <a href="Security-Troubleshooting.html">Security - Troubleshooting</a>
                        </li>
                     </ul>
                  </li>
               </ul>
            </li>
         </ul>

         <p class="productname"><a href="PivotalCommandCenter.html">Pivotal Command Center</a></p>
         <ul>
            <li>
               <a href="PCC2.3.0ReleaseNotes.html">PCC 2.3.0 Release Notes</a>
            </li>
            <li>
               <a href="PCCUserGuide.html">PCC User Guide</a>
               <ul>
                  <li>
                     <a href="PCCOverview.html">PCC Overview</a>
                  </li>
                  <li>
                     <a href="PCCInstallationPrerequisites.html">PCC Installation Prerequisites</a>
                     <ul>
                        <li>
                           <a href="BeforeYouBeginInstallingPCC.html">Before You Begin Installing PCC</a>
                        </li>
                        <li>
                           <a href="PCCPrerequisiteChecklist.html">PCC Prerequisite Checklist</a>
                        </li>
                        <li>
                           <a href="PCC-DNSLookup.html">PCC - DNS Lookup</a>
                        </li>
                        <li>
                           <a href="PCC-JAVAJDK.html">PCC - JAVA JDK</a>
                        </li>
                        <li>
                           <a href="PCC-VerifyPackageAccessibility.html">PCC - Verify Package Accessibility</a>
                        </li>
                        <li>
                           <a href="PCC-TurnOffiptables.html">PCC - Turn Off iptables</a>
                        </li>
                        <li>
                           <a href="PCC-DisableSELinux.html">PCC - Disable SELinux</a>
                        </li>
                        <li>
                           <a href="PCC-EPELYumRepository.html">PCC - EPEL Yum Repository</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="InstallationInstructions.html">Installation Instructions</a>
                     <ul>
                        <li>
                           <a href="SupportedPlatformsandBrowsers.html">Supported Platforms and Browsers</a>
                        </li>
                        <li>
                           <a href="PCCInstallationChecklist.html">PCC Installation Checklist</a>
                        </li>
                        <li>
                           <a href="InstallPCC.html">Install PCC</a>
                        </li>
                        <li>
                           <a href="PCC-ImportingthePackages.html">PCC - Importing the Packages</a>
                        </li>
                        <li>
                           <a href="LaunchingPCC.html">Launching PCC</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="UninstallingPCC.html">Uninstalling PCC</a>
                  </li>
                  <li>
                     <a href="UpgradingPCC.html">Upgrading PCC</a>
                  </li>
                  <li>
                     <a href="UsingPCC.html">Using PCC</a>
                     <ul>
                        <li>
                           <a href="PCCUIOverview.html">PCC UI Overview</a>
                        </li>
                        <li>
                           <a href="LoggingIn.html">Logging In</a>
                        </li>
                        <li>
                           <a href="PCCUISettings.html">PCC UI Settings</a>
                        </li>
                        <li>
                           <a href="PCCUIUserManagement.html">PCC UI User Management</a>
                        </li>
                        <li>
                           <a href="ClusterStatusPage.html">Cluster Status Page</a>
                        </li>
                        <li>
                           <a href="ConfiguringandDeployingaCluster.html">Configuring and Deploying a Cluster</a>
                           <ul>
                              <li>
                                 <a href="LaunchingtheAddClusterWizard.html">Launching the Add Cluster Wizard</a>
                              </li>
                              <li>
                                 <a href="CreateClusterDefinition.html">Create Cluster Definition</a>
                              </li>
                              <li>
                                 <a href="VersionsServicesandHosts.html">Versions, Services, and Hosts</a>
                              </li>
                              <li>
                                 <a href="HostVerification.html">Host Verification</a>
                              </li>
                              <li>
                                 <a href="ClusterTopology.html">Cluster Topology</a>
                              </li>
                              <li>
                                 <a href="ClusterConfiguration.html">Cluster Configuration</a>
                              </li>
                              <li>
                                 <a href="Validation.html">Validation</a>
                              </li>
                              <li>
                                 <a href="DeploymentStatus.html">Deployment Status</a>
                              </li>
                              <li>
                                 <a href="Summary.html">Summary</a>
                              </li>
                              <li>
                                 <a href="StartingtheClusterfromtheUI.html">Starting the Cluster from the UI</a>
                              </li>
                              <li>
                                 <a href="InitializingandConfiguringHAWQ.html">Initializing and Configuring HAWQ</a>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <a href="StartingStoppingandUninstallingaCluster.html">Starting, Stopping, and Uninstalling a Cluster</a>
                        </li>
                        <li>
                           <a href="PCCUIDashboard.html">PCC UI Dashboard</a>
                        </li>
                        <li>
                           <a href="ClusterAnalysis.html">Cluster Analysis</a>
                        </li>
                        <li>
                           <a href="MapReduceJobMonitor.html">MapReduce Job Monitor</a>
                        </li>
                        <li>
                           <a href="YarnAppMonitor.html">Yarn App Monitor</a>
                        </li>
                        <li>
                           <a href="HAWQQueryMonitor.html">HAWQ Query Monitor</a>
                        </li>
                        <li>
                           <a href="Topology.html">Topology</a>
                        </li>
                        <li>
                           <a href="Logs.html">Logs</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="ConfiguringPCCforLDAP.html">Configuring PCC for LDAP</a>
                  </li>
                  <li>
                     <a href="CommandLineReference.html">Command Line Reference</a>
                  </li>
               </ul>
            </li>
         </ul>

         <p class="productname"><a href="PivotalHAWQ.html">Pivotal HAWQ</a></p>
         <ul>
            <li>
               <a href="HAWQ1.2.1ReleaseNotes.html">HAWQ 1.2.1 Release Notes</a>
            </li>
            <li>
               <a href="HAWQInstallationandUpgrade.html">HAWQ Installation and Upgrade</a>
               <ul>
                  <li>
                     <a href="PreparingtoInstallHAWQ.html">Preparing to Install HAWQ</a>
                  </li>
                  <li>
                     <a href="InstallingHAWQ.html">Installing HAWQ</a>
                  </li>
                  <li>
                     <a href="InstallingtheHAWQComponents.html">Installing the HAWQ Components</a>
                  </li>
                  <li>
                     <a href="UpgradingHAWQandComponents.html">Upgrading HAWQ and Components</a>
                  </li>
                  <li>
                     <a href="HAWQConfigurationParameterReference.html">HAWQ Configuration Parameter Reference</a>
                  </li>
               </ul>
            </li>
            <li>
               <a href="HAWQAdministration.html">HAWQ Administration</a>
               <ul>
                  <li>
                     <a href="HAWQOverview.html">HAWQ Overview</a>
                  </li>
                  <li>
                     <a href="HAWQQueryProcessing.html">HAWQ Query Processing</a>
                  </li>
                  <li>
                     <a href="UsingHAWQtoQueryData.html">Using HAWQ to Query Data</a>
                  </li>
                  <li>
                     <a href="UsingProceduralLanguages.html">Using Procedural Languages</a>
                  </li>
                  <li>
                     <a href="ConfiguringClientAuthentication.html">Configuring Client Authentication</a>
                  </li>
                  <li>
                     <a href="ConfiguringKerberosAuthentication.html">Configuring Kerberos Authentication</a>
                  </li>
                  <li>
                     <a href="ConfiguringLDAPAuthentication.html">Configuring LDAP Authentication</a>
                  </li>
                  <li>
                     <a href="BackingUpandRestoringHAWQDatabases.html">Backing Up and Restoring HAWQ Databases</a>
                  </li>
                  <li>
                     <a href="ExpandingtheHAWQSystem.html">Expanding the HAWQ System</a>
                  </li>
                  <li>
                     <a href="HAWQInputFormatforMapReduce.html">HAWQ InputFormat for MapReduce</a>
                  </li>
                  <li>
                     <a href="HAWQFilespacesandHighAvailabilityEnabledHDFS.html">HAWQ Filespaces and High Availability Enabled HDFS</a>
                  </li>
                  <li>
                     <a href="SQLCommandReference.html">SQL Command Reference</a>
                     <ul>
                        <li>
                           <a href="ABORT.html">ABORT</a>
                        </li>
                        <li>
                           <a href="ANALYZE.html">ANALYZE</a>
                        </li>
                        <li>
                           <a href="ALTERAGGREGATE.html">ALTER AGGREGATE</a>
                        </li>
                        <li>
                           <a href="ALTERFUNCTION.html">ALTER FUNCTION</a>
                        </li>
                        <li>
                           <a href="ALTEROPERATOR.html">ALTER OPERATOR</a>
                        </li>
                        <li>
                           <a href="ALTEROPERATORCLASS.html">ALTER OPERATOR CLASS</a>
                        </li>
                        <li>
                           <a href="ALTERROLE.html">ALTER ROLE</a>
                        </li>
                        <li>
                           <a href="ALTERTABLE.html">ALTER TABLE</a>
                        </li>
                        <li>
                           <a href="ALTERTABLESPACE.html">ALTER TABLESPACE</a>
                        </li>
                        <li>
                           <a href="ALTERTYPE.html">ALTER TYPE</a>
                        </li>
                        <li>
                           <a href="ALTERUSER.html">ALTER USER</a>
                        </li>
                        <li>
                           <a href="BEGIN.html">BEGIN</a>
                        </li>
                        <li>
                           <a href="CHECKPOINT.html">CHECKPOINT</a>
                        </li>
                        <li>
                           <a href="CLOSE.html">CLOSE</a>
                        </li>
                        <li>
                           <a href="COMMIT.html">COMMIT</a>
                        </li>
                        <li>
                           <a href="COPY.html">COPY</a>
                        </li>
                        <li>
                           <a href="CREATEAGGREGATE.html">CREATE AGGREGATE</a>
                        </li>
                        <li>
                           <a href="CREATEDATABASE.html">CREATE DATABASE</a>
                        </li>
                        <li>
                           <a href="CREATEEXTERNALTABLE.html">CREATE EXTERNAL TABLE</a>
                        </li>
                        <li>
                           <a href="CREATEFUNCTION.html">CREATE FUNCTION</a>
                        </li>
                        <li>
                           <a href="CREATEGROUP.html">CREATE GROUP</a>
                        </li>
                        <li>
                           <a href="CREATELANGUAGE.html">CREATE LANGUAGE</a>
                        </li>
                        <li>
                           <a href="CREATEOPERATOR.html">CREATE OPERATOR</a>
                        </li>
                        <li>
                           <a href="CREATEOPERATORCLASS.html">CREATE OPERATOR CLASS</a>
                        </li>
                        <li>
                           <a href="CREATERESOURCEQUEUE.html">CREATE RESOURCE QUEUE</a>
                        </li>
                        <li>
                           <a href="CREATEROLE.html">CREATE ROLE</a>
                        </li>
                        <li>
                           <a href="CREATESCHEMA.html">CREATE SCHEMA</a>
                        </li>
                        <li>
                           <a href="CREATESEQUENCE.html">CREATE SEQUENCE</a>
                        </li>
                        <li>
                           <a href="CREATETABLE.html">CREATE TABLE</a>
                        </li>
                        <li>
                           <a href="CREATETABLEAS.html">CREATE TABLE AS</a>
                        </li>
                        <li>
                           <a href="CREATETABLESPACE.html">CREATE TABLESPACE</a>
                        </li>
                        <li>
                           <a href="CREATETYPE.html">CREATE TYPE</a>
                        </li>
                        <li>
                           <a href="CREATE-USER.html">CREATE USER</a>
                        </li>
                        <li>
                           <a href="CREATEVIEW.html">CREATE VIEW</a>
                        </li>
                        <li>
                           <a href="DEALLOCATE.html">DEALLOCATE</a>
                        </li>
                        <li>
                           <a href="DECLARE.html">DECLARE</a>
                        </li>
                        <li>
                           <a href="DROPAGGREGATE.html">DROP AGGREGATE</a>
                        </li>
                        <li>
                           <a href="DROPDATABASE.html">DROP DATABASE</a>
                        </li>
                        <li>
                           <a href="DROPEXTERNALTABLE.html">DROP EXTERNAL TABLE</a>
                        </li>
                        <li>
                           <a href="DROPFILESPACE.html">DROP FILESPACE</a>
                        </li>
                        <li>
                           <a href="DROPFUNCTION.html">DROP FUNCTION</a>
                        </li>
                        <li>
                           <a href="DROPGROUP.html">DROP GROUP</a>
                        </li>
                        <li>
                           <a href="DROPOPERATOR.html">DROP OPERATOR</a>
                        </li>
                        <li>
                           <a href="DROPOPERATORCLASS.html">DROP OPERATOR CLASS</a>
                        </li>
                        <li>
                           <a href="DROPOWNED.html">DROP OWNED</a>
                        </li>
                        <li>
                           <a href="DROPRESOURCEQUEUE.html">DROP RESOURCE QUEUE</a>
                        </li>
                        <li>
                           <a href="DROPROLE.html">DROP ROLE</a>
                        </li>
                        <li>
                           <a href="DROPSCHEMA.html">DROP SCHEMA</a>
                        </li>
                        <li>
                           <a href="DROPSEQUENCE.html">DROP SEQUENCE</a>
                        </li>
                        <li>
                           <a href="DROPTABLE.html">DROP TABLE</a>
                        </li>
                        <li>
                           <a href="DROPTABLESPACE.html">DROP TABLESPACE</a>
                        </li>
                        <li>
                           <a href="DROPTYPE.html">DROP TYPE</a>
                        </li>
                        <li>
                           <a href="DROP-USER.html">DROP USER</a>
                        </li>
                        <li>
                           <a href="DROPVIEW.html">DROP VIEW</a>
                        </li>
                        <li>
                           <a href="END.html">END</a>
                        </li>
                        <li>
                           <a href="EXECUTE.html">EXECUTE</a>
                        </li>
                        <li>
                           <a href="EXPLAIN.html">EXPLAIN</a>
                        </li>
                        <li>
                           <a href="FETCH.html">FETCH</a>
                        </li>
                        <li>
                           <a href="GRANT.html">GRANT</a>
                        </li>
                        <li>
                           <a href="INSERT.html">INSERT</a>
                        </li>
                        <li>
                           <a href="PREPARE.html">PREPARE</a>
                        </li>
                        <li>
                           <a href="REASSIGNOWNED.html">REASSIGN OWNED</a>
                        </li>
                        <li>
                           <a href="RELEASESAVEPOINT.html">RELEASE SAVEPOINT</a>
                        </li>
                        <li>
                           <a href="RESET.html">RESET</a>
                        </li>
                        <li>
                           <a href="REVOKE.html">REVOKE</a>
                        </li>
                        <li>
                           <a href="ROLLBACK.html">ROLLBACK</a>
                        </li>
                        <li>
                           <a href="ROLLBACKTOSAVEPOINT.html">ROLLBACK TO SAVEPOINT</a>
                        </li>
                        <li>
                           <a href="SAVEPOINT.html">SAVEPOINT</a>
                        </li>
                        <li>
                           <a href="SELECT.html">SELECT</a>
                        </li>
                        <li>
                           <a href="SELECTINTO.html">SELECT INTO</a>
                        </li>
                        <li>
                           <a href="SET.html">SET</a>
                        </li>
                        <li>
                           <a href="SETROLE.html">SET ROLE</a>
                        </li>
                        <li>
                           <a href="SETSESSIONAUTHORIZATION.html">SET SESSION AUTHORIZATION</a>
                        </li>
                        <li>
                           <a href="SHOW.html">SHOW</a>
                        </li>
                        <li>
                           <a href="TRUNCATE.html">TRUNCATE</a>
                        </li>
                        <li>
                           <a href="VACUUM.html">VACUUM</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="ManagementUtilityReference.html">Management Utility Reference</a>
                     <ul>
                        <li>
                           <a href="gpactivatestandby.html">gpactivatestandby</a>
                        </li>
                        <li>
                           <a href="gpcheckperf.html">gpcheckperf</a>
                        </li>
                        <li>
                           <a href="gpconfig.html">gpconfig</a>
                        </li>
                        <li>
                           <a href="gpexpand.html">gpexpand</a>
                        </li>
                        <li>
                           <a href="gpextract.html">gpextract</a>
                        </li>
                        <li>
                           <a href="gpfdist.html">gpfdist</a>
                        </li>
                        <li>
                           <a href="gpfilespace.html">gpfilespace</a>
                        </li>
                        <li>
                           <a href="gpinitstandby.html">gpinitstandby</a>
                        </li>
                        <li>
                           <a href="gpinitsystem.html">gpinitsystem</a>
                        </li>
                        <li>
                           <a href="gpload.html">gpload</a>
                        </li>
                        <li>
                           <a href="gplogfilter.html">gplogfilter</a>
                        </li>
                        <li>
                           <a href="gprecoverseg.html">gprecoverseg</a>
                        </li>
                        <li>
                           <a href="gpscp.html">gpscp</a>
                        </li>
                        <li>
                           <a href="gpstart.html">gpstart</a>
                        </li>
                        <li>
                           <a href="gpssh.html">gpssh</a>
                        </li>
                        <li>
                           <a href="gssh-exkeys.html">gssh-exkeys</a>
                        </li>
                        <li>
                           <a href="gpstate.html">gpstate</a>
                        </li>
                        <li>
                           <a href="gpstop.html">gpstop</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="ClientUtilityReference.html">Client Utility Reference</a>
                     <ul>
                        <li>
                           <a href="createdb.html">createdb</a>
                        </li>
                        <li>
                           <a href="createlang.html">createlang</a>
                        </li>
                        <li>
                           <a href="createuser.html">createuser</a>
                        </li>
                        <li>
                           <a href="dropdb.html">dropdb</a>
                        </li>
                        <li>
                           <a href="dropuser.html">dropuser</a>
                        </li>
                        <li>
                           <a href="pg_dump.html">pg_dump</a>
                        </li>
                        <li>
                           <a href="pg_dumpall.html">pg_dumpall</a>
                        </li>
                        <li>
                           <a href="pg_restore.html">pg_restore</a>
                        </li>
                        <li>
                           <a href="psql.html">psql</a>
                        </li>
                        <li>
                           <a href="vacuumdb.html">vacuumdb</a>
                        </li>
                     </ul>
                  </li>
                  <li>
                     <a href="HAWQServerConfigurationParameters.html">HAWQ Server Configuration Parameters</a>
                  </li>
                  <li>
                     <a href="CharacterSetSupportReference.html">Character Set Support Reference</a>
                  </li>
                  <li>
                     <a href="HAWQEnvironmentVariables.html">HAWQ Environment Variables</a>
                  </li>
                  <li>
                     <a href="HAWQDataTypes.html">HAWQ Data Types</a>
                  </li>
                  <li>
                     <a href="SystemCatalogReference.html">System Catalog Reference</a>
                  </li>
                  <li>
                     <a href="hawq_toolkitReference.html">hawq_toolkit Reference</a>
                  </li>
                  <li>
                     <a href="ManagingHAWQLogFiles.html">Managing HAWQ Log Files</a>
                  </li>
               </ul>
            </li>
            <li>
               <a href="PivotalExtensionFrameworkPXF.html">Pivotal Extension Framework (PXF)</a>
               <ul>
                  <li>
                     <a href="PXFInstallationandAdministration.html">PXF Installation and Administration</a>
                  </li>
                  <li>
                     <a href="PXFExternalTableandAPIReference.html">PXF External Table and API Reference</a>
                  </li>
               </ul>
            </li>
         </ul>

</div>
   
	<!-- end INSERT SIDENAV -->
	
	<main class="content content-layout" id="js-content" role="main">
        <a id="top"></a>
        
          <h1 class="title-container">Using HAWQ to Query Data</h1>
          <div id="js-quick-links"></div>          
        
        <div class="to-top" id="js-to-top">
          <a href="#top" title="back to top"></a>
        </div>     
        
		<!-- Python script replaces main content -->
		<div style="visibility:hidden; height:2px;">Pivotal Product Documentation : Using HAWQ to Query Data</div><div class="wiki-content group" id="main-content">
<p align="LEFT">This chapter describes the use of the SQL language in Pivotal HAWQ Database. SQL commands are typically entered using the standard PostgreSQL interactive terminal psql, but other programs that have similar functionality can be used as well.</p><p><style type="text/css">/*<![CDATA[*/
div.rbtoc1410924417875 {padding: 0px;}
div.rbtoc1410924417875 ul {list-style: disc;margin-left: 0px;}
div.rbtoc1410924417875 li {margin-left: 0px;padding-left: 0px;}

/*]]>*/</style><div class="toc-macro rbtoc1410924417875">
<ul class="toc-indentation">
<li><a href="#UsingHAWQtoQueryData-DefiningQueries">Defining Queries</a>
<ul class="toc-indentation">
<li><a href="#UsingHAWQtoQueryData-SQLLexicon">SQL Lexicon</a></li>
<li><a href="#UsingHAWQtoQueryData-SQLValueExpressions">SQL Value Expressions</a>
<ul class="toc-indentation">
<li><a href="#UsingHAWQtoQueryData-FunctionCalls">Function Calls</a></li>
<li><a href="#UsingHAWQtoQueryData-AggregateExpressions">Aggregate Expressions</a></li>
<li><a href="#UsingHAWQtoQueryData-ScalarSubqueries">Scalar Subqueries</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#UsingHAWQtoQueryData-UsingFunctionsandOperators">Using Functions and Operators</a>
<ul class="toc-indentation">
<li><a href="#UsingHAWQtoQueryData-FunctionsinHAWQ">Functions in HAWQ</a></li>
<li><a href="#UsingHAWQtoQueryData-UserDefinedFunctions">User Defined Functions</a>
<ul class="toc-indentation">
<li><a href="#UsingHAWQtoQueryData-FunctionVolatility">Function Volatility</a></li>
</ul>
</li>
<li><a href="#UsingHAWQtoQueryData-UserDefinedTypes">User Defined Types</a></li>
<li><a href="#UsingHAWQtoQueryData-UserDefinedOperators">User Defined Operators</a></li>
<li><a href="#UsingHAWQtoQueryData-Built-inFunctionsandOperators">Built-in Functions and Operators</a>
<ul class="toc-indentation">
<li><a href="#UsingHAWQtoQueryData-AdvancedAnalyticFunctions">Advanced Analytic Functions </a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div></p><h2 id="UsingHAWQtoQueryData-DefiningQueries">Defining Queries</h2><p align="LEFT">A query is a SQL command that views, changes or analyzes the data in a database. This section describes how to construct SQL queries in HAWQ Database.</p><ul><li>SQL Lexicon</li><li>SQL Value Expressions</li></ul><h3 id="UsingHAWQtoQueryData-SQLLexicon">SQL Lexicon</h3><p align="LEFT">SQL (structured query language) is the language used to access the database. The SQL language has a specific lexicon (words, special characters, etc.) used to construct queries or commands that the database engine can understand.</p><p align="LEFT">SQL input consists of a sequence of commands. A command is composed of a sequence of tokens, terminated by a semicolon (;). Which tokens are valid depends on the syntax of the particular command. The syntax rules for each command are described in  <em> <a href="SQLCommandReference.html">SQL Command Reference</a> </em>.</p><p>HAWQ Database is based on PostgreSQL and adheres to the same SQL structure and syntax (with some minor exceptions). In most cases, the syntax is identical to PostgreSQL, however some commands may have additional or restricted syntax in HAWQ Database. For a complete explanation of the SQL rules and concepts, as implemented in PostgreSQL, refer to the section on SQL Syntax in the PostgreSQL documentation.</p><h3 id="UsingHAWQtoQueryData-SQLValueExpressions">SQL Value Expressions</h3><p align="LEFT">Value expressions are used in a variety of contexts, such as in the target list of the SELECT command, as new column values in INSERT or UPDATE, or in search conditions in a number of commands. The result of a value expression is sometimes called a <em>scalar</em>, to distinguish it from the result of a table expression (which is a table). Value expressions are therefore also called scalar expressions (or even simply expressions). The expression syntax allows the calculation of values from primitive parts using arithmetic, logical, set, and other operations.</p><p align="LEFT">Pivotal HAWQ supports the following value expressions:</p><ul><li>A function call</li><li>An aggregate expression</li><li>A window expression</li><li>A scalar subquery</li><li>Another value expression in parentheses, useful to group subexpressions and override precedence.</li></ul><p>In addition to this list, there are a number of constructs that can be classified as expressions, but do not follow any general syntax rules. These generally have the semantics of a function or operator and are explained in <a href="UsingHAWQtoQueryData.html">Using Functions and Operators</a>.</p><h4 id="UsingHAWQtoQueryData-FunctionCalls">Function Calls</h4><p>The syntax for a function call is the name of a function (possibly qualified with a schema name), followed by its argument list enclosed in parentheses:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">function
([expression  [, expression  ... ]] )</pre>
</div></div><p align="LEFT">For example, the following function call computes the square root of 2:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">sqrt(2)</pre>
</div></div><p align="LEFT">The list of built-in functions is listed in <a href="UsingHAWQtoQueryData.html">Built-in Functions and Operators</a>. Other functions may be added by the user.</p><h4 id="UsingHAWQtoQueryData-AggregateExpressions">Aggregate Expressions</h4><p align="LEFT">An aggregate expression represents the application of an aggregate function across the rows selected by a query. An aggregate function reduces multiple inputs to a single output value, such as the sum or average of the inputs. The syntax of an aggregate expression is one of the following:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">aggregate_name (expression [ , ... ] ) [FILTER (WHERE condition)]
aggregate_name (ALL expression [ , ... ] ) [FILTER (WHERE condition)]
aggregate_name (DISTINCT expression [ , ... ] ) [FILTER (WHERE condition)]
aggregate_name ( * ) [FILTER (WHERE condition)]</pre>
</div></div><p align="LEFT">Where <em>aggregate_name </em> is a previously defined aggregate (possibly qualified with a schema name), and <em>expression </em> is any value expression that does not itself contain an aggregate expression.</p><p align="LEFT">The first form of aggregate expression invokes the aggregate across all input rows for which the given expression(s) yield non-null values. The second form is the same as the first, since ALL is the default. The third form invokes the aggregate for all distinct non-null values of the expressions found in the input rows. The last form invokes the aggregate once for each input row regardless of null or non-null values; since no particular input value is specified, it is generally only useful for the count(*) aggregate function.</p><p align="LEFT">For example, count(*) yields the total number of input rows; count(f1) yields the number of input rows in which f1 is non-null; count(distinct f1) yields the number of distinct non-null values of f1.</p><p>The FILTER clause allows you to specify a condition to limit the input rows to the aggregate function. For example:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">SELECT count(*) FILTER (WHERE gender='F') FROM employee;</pre>
</div></div><p>The WHERE <em>condition </em> of the FILTER clause cannot contain a set returning function, subquery, a window function, or an outer reference. If using a user-defined aggregate function, the state transition function must be declared as STRICT (see CREATE AGGREGATE).</p><p>The predefined aggregate functions are described in Aggregate Functions. Other aggregate functions may be added by the user.</p><p>An aggregate expression may only appear in the result list or HAVING clause of a SELECT command. It is forbidden in other clauses, such as WHERE, because those clauses are logically evaluated before the results of aggregates are formed.</p><p>When an aggregate expression appears in a subquery (see <em> <a href="UsingHAWQtoQueryData.html">Scalar Subqueries</a> </em>  and <em> <a href="UsingHAWQtoQueryData.html">Subquery Expressions</a> </em>), the aggregate is normally evaluated over the rows of the subquery. But an exception occurs if the aggregate’s arguments contain only outer-level variables: the aggregate then belongs to the nearest such outer level, and is evaluated over the rows of that query. The aggregate expression as a whole is then an outer reference for the subquery it appears in, and acts as a constant over any one evaluation of that subquery. The restriction about appearing only in the result list or HAVING clause applies, with respect to the query level of aggregate.</p><p>Pivotal HAWQ Database currently does not support DISTINCT with more than one input expression.</p><h4 id="UsingHAWQtoQueryData-ScalarSubqueries"><span style="line-height: 1.5;">Scalar Subqueries</span></h4><p>A scalar subquery is an ordinary SELECT query in parentheses that returns exactly one row with one column. The SELECT query is executed and the single returned value is used in the surrounding value expression. It is an error to use a query that returns more than one row or more than one column as a scalar subquery. A scalar subquery is correlated if it contains references to the outer query block.</p><h2 id="UsingHAWQtoQueryData-UsingFunctionsandOperators">Using Functions and Operators</h2><ul><li>Functions in HAWQ</li><li>User Defined Functions</li><li>Built-in Functions and Operators</li></ul><h3 id="UsingHAWQtoQueryData-FunctionsinHAWQ">Functions in HAWQ</h3><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Function Type</th><th class="confluenceTh">Pivotal Support</th><th class="confluenceTh">Description</th><th class="confluenceTh">Comments</th></tr><tr><td class="confluenceTd">IMMUTABLE</td><td class="confluenceTd">Yes</td><td class="confluenceTd"><p align="LEFT">Relies only on information directly in its argument list. Given the same argument values, always returns the same result.</p></td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">STABLE</td><td class="confluenceTd">Yes, in most cases</td><td class="confluenceTd"><p align="LEFT">Within a single table scan, returns the same result for same argument values, but results change across SQL statements.</p></td><td class="confluenceTd"><p align="LEFT">Results depend on database lookups or parameter values. current_timestamp family of functions is STABLE; values do not change within an execution.</p></td></tr><tr><td class="confluenceTd">VOLATILE</td><td class="confluenceTd">Restricted</td><td class="confluenceTd"><p align="LEFT">Function values can change within a single table scan. For example: random(), currval(), timeofday().</p></td><td class="confluenceTd"><p align="LEFT">Any function with side effects is volatile, even if its result is predictable. For example: setval()</p></td></tr></tbody></table></div><p align="LEFT">Data is divided up across segments — each segment is a distinct HAWQ database. To prevent inconsistent or unexpected results, do not execute functions classified as VOLATILE at the segment level if they contain SQL commands or modify the database in any way. For example, functions such as setval() are not allowed to execute on distributed data because they can cause inconsistent data between segment instances. To ensure data consistency, you can safely use VOLATILE and STABLE functions in statements that are evaluated on and run from the master. For example, the following statements run on the master (statements without a FROM clause):</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">SELECT setval('myseq', 201);
SELECT foo();</pre>
</div></div><p align="LEFT">If a statement has a FROM clause containing a distributed table and the function in the FROM clause returns a set of rows, the statement can run on the segments:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">SELECT * from foo();</pre>
</div></div><h3 id="UsingHAWQtoQueryData-UserDefinedFunctions">User Defined Functions</h3><p align="LEFT">HAWQ supports user defined functions. <span style="color: rgb(0,0,0);">Every kind of function can take base types, composite types, or combinations of these as arguments (parameters). In addition, every kind of function can return a base type or a composite type. Functions can also be defined to return sets of base or composite values. Please see <a href="CREATEFUNCTION.html">CREATE FUNCTION</a> for more information.</span></p><p align="LEFT">Use the CREATE FUNCTION command to register user defined functions. By default, user defined functions are declared as VOLATILE, so if your user-defined function is IMMUTABLE or STABLE, you must specify the correct volatility level when you register your function.</p><h4 id="UsingHAWQtoQueryData-FunctionVolatility">Function Volatility</h4><p>Every function has a <em class="FIRSTTERM">volatility</em> classification, with the possibilities being VOLATILE, STABLE, or IMMUTABLE. VOLATILE is the default if the <a href="CREATEFUNCTION.html">CREATE FUNCTION</a> command does not specify a category. The volatility category is a promise to the optimizer about the behavior of the function:</p><ul><li><p>A VOLATILE function can do anything, including modifying the database. It can return different results on successive calls with the same arguments. The optimizer makes no assumptions about the behavior of such functions. A query using a volatile function will re-evaluate the function at every row where its value is needed.</p></li><li><p>A STABLE function cannot modify the database and is guaranteed to return the same results given the same arguments for all rows within a single statement. This category allows the optimizer to optimize multiple calls of the function to a single call. In particular, it is safe to use an expression containing such a function in an index scan condition. (Since an index scan will evaluate the comparison value only once, not once at each row, it is not valid to use a VOLATILE function in an index scan condition.)</p></li><li><p>An IMMUTABLE function cannot modify the database and is guaranteed to return the same results given the same arguments forever. This category allows the optimizer to pre-evaluate the function when a query calls it with constant arguments. For example, a query like SELECT ... WHERE x = 2 + 2 can be simplified on sight to SELECT ... WHERE x = 4, because the function underlying the integer addition operator is marked IMMUTABLE.</p></li></ul><p>For best optimization results, you should label your functions with the strictest volatility category that is valid for them.</p><p>Any function with side-effects <span class="emphasis EMPHASIS c2">must</span> be labeled VOLATILE, so that calls to it cannot be optimized away. Even a function with no side-effects needs to be labeled VOLATILE if its value can change within a single query; some examples are random(), currval(), timeofday().</p><p>Another important example is that the <code class="FUNCTION">current_timestamp</code> family of functions qualify as STABLE, since their values do not change within a transaction.</p><p>There is relatively little difference between STABLE and IMMUTABLE categories when considering simple interactive queries that are planned and immediately executed: it doesn't matter a lot whether a function is executed once during planning or once during query execution startup. But there is a big difference if the plan is saved and reused later. Labeling a function IMMUTABLE when it really isn't might allow it to be prematurely folded to a constant during planning, resulting in a stale value being re-used during subsequent uses of the plan. This is a hazard when using prepared statements or when using function languages that cache plans (such as <span class="APPLICATION">PL/pgSQL</span>).</p><p>For functions written in SQL or in any of the standard procedural languages, there is a second important property determined by the volatility category, namely the visibility of any data changes that have been made by the SQL command that is calling the function. A VOLATILE function will see such changes, a STABLE or IMMUTABLE function will not. STABLE and IMMUTABLE functions use a snapshot established as of the start of the calling query, whereas VOLATILE functions obtain a fresh snapshot at the start of each query they execute.</p><p>Because of this snapshotting behavior, a function containing only SELECT commands can safely be marked STABLE, even if it selects from tables that might be undergoing modifications by concurrent queries. <span class="PRODUCTNAME">PostgreSQL</span> will execute all commands of a STABLE function using the snapshot established for the calling query, and so it will see a fixed view of the database throughout that query.</p><p>The same snapshotting behavior is used for SELECT commands within IMMUTABLE functions. It is generally unwise to select from database tables within an IMMUTABLEfunction at all, since the immutability will be broken if the table contents ever change. However, <span class="PRODUCTNAME">PostgreSQL</span> does not enforce that you do not do that.</p><p>A common error is to label a function IMMUTABLE when its results depend on a configuration parameter. For example, a function that manipulates timestamps might well have results that depend on the timezone setting. For safety, such functions should be labeled STABLE instead.</p><p align="LEFT">When you create user defined functions, avoid using fatal errors or destructive calls. HAWQ may respond to such errors with a sudden shutdown or restart.</p><p align="LEFT">In HAWQ, the shared library files for user-created functions must reside in the same library path location on every host in the HAWQ array (masters, segments, and mirrors).</p><p align="LEFT"><strong style="line-height: 1.4285715;background-color: transparent;">Important:</strong><span style="line-height: 1.4285715;background-color: transparent;"> HAWQ does not support the following:</span></p><ul><li><span style="line-height: 1.4285715;">Enhanced table functions</span></li><li>PL/Java Type Maps</li></ul><h3 id="UsingHAWQtoQueryData-UserDefinedTypes">User Defined Types</h3><p><span class="PRODUCTNAME">HAWQ</span> can be extended to support new data types. This section describes how to define new base types, which are data types defined below the level of the SQL language. Creating a new base type requires implementing functions to operate on the type in a low-level language, usually C.</p><p><a name="AEN37697" rel="nofollow"></a> <a name="AEN37699" rel="nofollow"></a>A user-defined type must always have input and output functions.<a name="AEN37701" rel="nofollow"></a> <a name="AEN37704" rel="nofollow"></a> These functions determine how the type appears in strings (for input by the user and output to the user) and how the type is organized in memory. The input function takes a null-terminated character string as its argument and returns the internal (in memory) representation of the type. The output function takes the internal representation of the type as argument and returns a null-terminated character string. If we want to do anything more with the type than merely store it, we must provide additional functions to implement whatever operations we'd like to have for the type.</p><p>You should be careful to make the input and output functions inverses of each other. If you do not, you will have severe problems when you need to dump your data into a file and then read it back in. This is a particularly common problem when floating-point numbers are involved.</p><p>Optionally, a user-defined type can provide binary input and output routines. Binary I/O is normally faster but less portable than textual I/O. As with textual I/O, it is up to you to define exactly what the external binary representation is. Most of the built-in data types try to provide a machine-independent binary representation. </p><p><span style="color: rgb(0,0,0);">Once we have written the I/O functions and compiled them into a shared library, we can define the </span>complex<span style="color: rgb(0,0,0);"> type in SQL. First we declare it as a shell type:</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">CREATE TYPE complex;</pre>
</div></div><p><span style="color: rgb(0,0,0);">This serves as a placeholder that allows us to reference the type while defining its I/O functions. Now we can define the I/O functions:</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">CREATE FUNCTION complex_in(cstring)
    RETURNS complex
    AS 'filename'
    LANGUAGE C IMMUTABLE STRICT;

CREATE FUNCTION complex_out(complex)
    RETURNS cstring
    AS 'filename'
    LANGUAGE C IMMUTABLE STRICT;

CREATE FUNCTION complex_recv(internal)
   RETURNS complex
   AS 'filename'
   LANGUAGE C IMMUTABLE STRICT;

CREATE FUNCTION complex_send(complex)
   RETURNS bytea
   AS 'filename'
   LANGUAGE C IMMUTABLE STRICT;</pre>
</div></div><p><span style="color: rgb(0,0,0);">Finally, we can provide the full definition of the data type:</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">CREATE TYPE complex (
   internallength = 16, 
   input = complex_in,
   output = complex_out,
   receive = complex_recv,
   send = complex_send,
   alignment = double
);</pre>
</div></div><p>When you define a new base type, <span class="PRODUCTNAME">HAWQ</span> automatically provides support for arrays of that type.<a name="AEN37733" rel="nofollow"></a> For historical reasons, the array type has the same name as the base type with the underscore character (_) prepended.</p><p>Once the data type exists, we can declare additional functions to provide useful operations on the data type. Operators can then be defined atop the functions, and if needed, operator classes can be created to support indexing of the data type. </p><p><span style="line-height: 1.4285715;">For further details see the description of the </span> <a href="CREATETYPE.html">CREATE TYPE</a> <span style="line-height: 1.4285715;"> command.</span> <br/> <a name="AEN37739" rel="nofollow"></a></p><h3 id="UsingHAWQtoQueryData-UserDefinedOperators">User Defined Operators</h3><p>Every operator is <span class="QUOTE">"syntactic sugar"</span> for a call to an underlying function that does the real work; so you must first create the underlying function before you can create the operator. However, an operator is <span class="emphasis EMPHASIS c2">not merely</span> syntactic sugar, because it carries additional information that helps the query planner optimize queries that use the operator. The next section will be devoted to explaining that additional information.</p><p><span class="PRODUCTNAME">HAWQ</span> supports left unary, right unary, and binary operators. Operators can be overloaded;<a name="AEN37761" rel="nofollow"></a> that is, the same operator name can be used for different operators that have different numbers and types of operands. When a query is executed, the system determines the operator to call from the number and types of the provided operands.</p><p>Here is an example of creating an operator for adding two complex numbers. We assume we've already created the definition of type complex. First we need a function that does the work, then we can define the operator:</p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">CREATE FUNCTION complex_add(complex, complex)
    RETURNS complex
    AS 'filename', 'complex_add'
    LANGUAGE C IMMUTABLE STRICT;

CREATE OPERATOR + (
    leftarg = complex,
    rightarg = complex,
    procedure = complex_add,
    commutator = +
);</pre>
</div></div><p><span style="color: rgb(0,0,0);">Now we could execute a query like this:</span></p><div class="code panel pdl" style="border-width: 1px;"><div class="codeContent panelContent pdl">
<pre class="theme: Confluence; brush: sql; gutter: false" style="font-size:12px;">SELECT (a + b) AS c FROM test_complex;

        c
-----------------
 (5.2,6.05)
 (133.42,144.95)</pre>
</div></div><p><span style="color: rgb(0,0,0);">We've shown how to create a binary operator here. To create unary operators, just omit one of </span>leftarg<span style="color: rgb(0,0,0);"> (for left unary) or </span>rightarg<span style="color: rgb(0,0,0);"> (for right unary). The </span>procedure<span style="color: rgb(0,0,0);"> clause and the argument clauses are the only required items in </span>CREATE OPERATOR<span style="color: rgb(0,0,0);">. The </span>commutator<span style="color: rgb(0,0,0);"> clause shown in the example is an optional hint to the query optimizer. Further details about</span>commutator<span style="color: rgb(0,0,0);"> and other optimizer hints appear in the next section.</span></p><h3 id="UsingHAWQtoQueryData-Built-inFunctionsandOperators">Built-in Functions and Operators</h3><p align="LEFT">The following table lists the categories of built-in functions and operators. All functions and operators are supported in HAWQ (and PostgreSQL). STABLE and VOLATILE functions are subject to the restrictions noted in <a href="UsingHAWQtoQueryData.html">User Defined Functions</a>. For more information about the built-in functions and operators listed in the table, see the PostgreSQL documentation at <a class="external-link" href="http://www.postgresql.org/docs/9.1/static/functions.html" rel="nofollow">http://www.postgresql.org/docs/9.1/static/functions.html</a>.</p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Operator/Function</th><th class="confluenceTh">Volatile</th><th class="confluenceTh">Stable</th></tr><tr><td class="confluenceTd">Logical operators</td><td class="confluenceTd"> </td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Comparison operators</td><td class="confluenceTd"> </td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Mathematical Functions and Operators</td><td class="confluenceTd">random<br/>setseed</td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">String Functions and Operators</td><td class="confluenceTd">All built-in conversion functions</td><td class="confluenceTd"><p>convert<br/>pg_client_encoding</p><p> </p></td></tr><tr><td class="confluenceTd">Binary String Functions and Operators</td><td class="confluenceTd"> </td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Bit String Functions and Operators</td><td class="confluenceTd"> </td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Pattern Matching</td><td class="confluenceTd"> </td><td class="confluenceTd"> </td></tr><tr><td class="confluenceTd">Data Type Formatting Functions</td><td class="confluenceTd"> </td><td class="confluenceTd">to_char<br/>to_timestamp</td></tr><tr><td class="confluenceTd" colspan="1">Date/Time Functions and Operators</td><td class="confluenceTd" colspan="1">timeofday</td><td class="confluenceTd" colspan="1">age<br/>current_date<br/>current_time<br/>current_timestamp<br/>ocaltime<br/>localtimestamp<br/>now </td></tr><tr><td class="confluenceTd" colspan="1">Geometric Functions ad Operators</td><td class="confluenceTd" colspan="1"> </td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">Network Address Functions and Operators</td><td class="confluenceTd" colspan="1"> </td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">Sequence Manipulation Functions</td><td class="confluenceTd" colspan="1">currval<br/>lastval<br/>nextval<br/>setval </td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">Conditional Expressions</td><td class="confluenceTd" colspan="1"> </td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">Array Functions and Operators</td><td class="confluenceTd" colspan="1"> </td><td class="confluenceTd" colspan="1">All array functions </td></tr><tr><td class="confluenceTd" colspan="1">Aggregate Functions </td><td class="confluenceTd" colspan="1"> </td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">Subquery Expressions</td><td class="confluenceTd" colspan="1"> </td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">Row and Array Comparisons</td><td class="confluenceTd" colspan="1"> </td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">Set Returning Functions </td><td class="confluenceTd" colspan="1">generate_series </td><td class="confluenceTd" colspan="1"> </td></tr><tr><td class="confluenceTd" colspan="1">System Information Functions </td><td class="confluenceTd" colspan="1"> </td><td class="confluenceTd" colspan="1"><p>All session information functions<br/>All access privilege inquiry functions<br/>All schema visibility inquiry functions<br/>All comment information functions </p></td></tr><tr><td class="confluenceTd" colspan="1">System Administration Functions</td><td class="confluenceTd" colspan="1"><p align="LEFT">set_config<br/>pg_cancel_backend<br/>pg_reload_conf<br/>pg_rotate_logfile<br/>pg_start_backup<br/>pg_stop_backup<br/>pg_size_pretty<br/>pg_ls_dir<br/>pg_read_file<br/>pg_stat_file </p></td><td class="confluenceTd" colspan="1"><p align="LEFT">current_setting<br/>All database object size functions</p></td></tr><tr><td class="confluenceTd" colspan="1">XML Functions</td><td class="confluenceTd" colspan="1"> </td><td class="confluenceTd" colspan="1"><p align="LEFT">xmlagg(xml)<br/>xmlexists(text, xml)<br/>xml_is_well_formed(text)<br/>xml_is_well_formed_document(text)<br/>xml_is_well_formed_content(text)<br/>xpath(text, xml)<br/>xpath(text, xml, text[])<br/>xpath_exists(text, xml)<br/>xpath_exists(text, xml, text[])<br/>xml(text)<br/>text(xml)<br/>xmlcomment(xml)<br/>xmlconcat2(xml, xml) </p></td></tr></tbody></table></div><h4 id="UsingHAWQtoQueryData-AdvancedAnalyticFunctions">Advanced Analytic Functions </h4><p>HAWQ provides specialized and native built-in advanced analytic <em>immutable </em>functions. </p><p><strong>Table: Advanced Analytic Functions</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Function</th><th class="confluenceTh">Return Type</th><th class="confluenceTh">Full Syntax</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><p align="LEFT">matrix_add<br/>(array[],<br/>array[])</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">smallint[]<br/>int[], <br/>bigint[], <br/>float[]</p></td><td class="confluenceTd"><p align="LEFT">matrix_add(<br/>array[[1,1],[2,2]], <br/>array[[3,4],[5,6]])</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">Adds two two-dimensional matrices. The matrices must be conformable.</p><p align="LEFT"> </p></td></tr><tr><td class="confluenceTd"><p align="LEFT">matrix_multiply(<br/>array[],<br/> array[])</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">smallint[]<br/> int[], <br/>bigint[], <br/>float[]</p></td><td class="confluenceTd"><p align="LEFT">matrix_multiply(<br/>array[[2,0,0],[0,2,0],[0,0,2]], <br/>array[[3,0,3],[0,3,0],[0,0,3]])</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">Multiplies two three- dimensional arrays. The matrices must be conformable.</p><p align="LEFT"> </p></td></tr><tr><td class="confluenceTd"><p align="LEFT">matrix_multiply<br/>(array[], <em>expr</em> )</p></td><td class="confluenceTd"><p align="LEFT">int[], <br/>float[]</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">matrix_multiply(<br/>array[[1,1,1], [2,2,2], [3,3,3]], 2)</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">Multiplies a two-dimensional array and a scalar numeric value.</p><p align="LEFT"> </p></td></tr><tr><td class="confluenceTd"><p align="LEFT">matrix_transpose(<br/>array[])</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">Same as input array type.</p></td><td class="confluenceTd"><p align="LEFT">matrix_transpose(<br/>array [[1,1,1],[2,2,2]])</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">Transposes a two-dimensional array.</p><p align="LEFT"> </p></td></tr><tr><td class="confluenceTd"><p align="LEFT">pinv(array[]) </p></td><td class="confluenceTd"><p align="LEFT">smallint[]<br/>int[], <br/>bigint[], <br/>float[]</p></td><td class="confluenceTd"><p align="LEFT">pinv(<br/>array[[2.5,0,0],[0,1,0],[0,0,.5]])</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">Calculates the Moore-Penrose pseudoinverse of a matrix.</p><p align="LEFT"> </p></td></tr><tr><td class="confluenceTd"><p align="LEFT">unnest (array[])</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">set of anyelement</p></td><td class="confluenceTd"><p align="LEFT">unnest(<br/>array['one', 'row', 'per', 'item'])</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">Transforms a one dimensional array into rows. Returns a set of any element.</p></td></tr></tbody></table></div><p><strong>Table: Advanced Aggregate Functions</strong></p><div class="table-wrap"><table class="confluenceTable"><tbody><tr><th class="confluenceTh">Function</th><th class="confluenceTh">Return Type</th><th class="confluenceTh">Full Syntax</th><th class="confluenceTh">Description</th></tr><tr><td class="confluenceTd"><p align="LEFT">sum(<br/>array[])</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">smallint[]<br/>int[], <br/>bigint[], <br/>float[]</p></td><td class="confluenceTd">sum(array[[1,2],[3,4]])<br/>Example:<br/>CREATE TABLE mymatrix (myvalue int[]);<br/>INSERT INTO mymatrix VALUES (<br/>array[[1,2],[3,4]]);<br/>INSERT INTO mymatrix VALUES (<br/>array[[0,1],[1,0]]);<br/>SELECT sum(myvalue) FROM mymatrix;<br/>sum<br/>---------------<br/>{{1,3},{4,4}} </td><td class="confluenceTd"><p align="LEFT">Performs matrix summation. Can take as input a two-dimensional array that is treated as a matrix.</p><p align="LEFT"> </p></td></tr><tr><td class="confluenceTd"><p align="LEFT">pivot_sum(<br/>label[], <br/>label, <em>expr</em> )</p></td><td class="confluenceTd"><p align="LEFT">int[], <br/>bigint[], <br/>float[]</p></td><td class="confluenceTd"><p align="LEFT">pivot_sum(array['A1','A2'], attr, value)</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">A pivot aggregation using sum to resolve duplicate entries.</p><p align="LEFT"> </p></td></tr><tr><td class="confluenceTd"><p align="LEFT">mregr_coef(<br/> <em>expr</em>, array[])</p></td><td class="confluenceTd"><p align="LEFT">float[]</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">mregr_coef(y, array[1, x1, x2])</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">The four mregr_* aggregates perform linear regressions using the ordinary-least-squares method. mregr_coef calculates the regression coefficients. The size of the return array for mregr_coef is the same as the size of the input array of independent variables, since the return array contains the coefficient for each independent variable.</p></td></tr><tr><td class="confluenceTd"><p align="LEFT">mregr_r2(<br/> <em>expr</em>, array[])</p></td><td class="confluenceTd">float </td><td class="confluenceTd"><p align="LEFT">mregr_r2(y, array[1, x1, x2])</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">The four mregr_* aggregates perform linear regressions using the ordinary-least-squares method. mregr_r2 calculates the r-squared error value for the regression.</p></td></tr><tr><td class="confluenceTd"><p align="LEFT">mregr_pvalues(<br/> <em>expr</em>, array[])</p></td><td class="confluenceTd">float[] </td><td class="confluenceTd"><p align="LEFT">mregr_pvalues(y, array[1, x1, x2])</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">The four mregr_* aggregates perform linear regressions using the ordinary-least-squares method. mregr_pvalues calculates the p-values for the regression.</p></td></tr><tr><td class="confluenceTd"><p align="LEFT">mregr_tstats(<br/> <em>expr</em>, array[])</p></td><td class="confluenceTd"><p align="LEFT">float[]</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">mregr_tstats(y, array[1, x1, x2])</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">The four mregr_* aggregates perform linear regressions using the ordinary-least-squares method. mregr_tstats calculates the t-statistics for the regression.</p></td></tr><tr><td class="confluenceTd"><p align="LEFT">nb_classify(text[], <br/>bigint, <br/>bigint[], <br/>bigint[])</p></td><td class="confluenceTd">text </td><td class="confluenceTd"><p align="LEFT">nb_classify(classes, attr_count, <br/>class_count, <br/>class_total)</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">Classify rows using a Naive Bayes Classifier. This aggregate uses a baseline of training data to predict the classification of new rows and returns the class with the largest likelihood of appearing in the new rows.</p></td></tr><tr><td class="confluenceTd"><p align="LEFT">nb_probabilities(text[], <br/>bigint, <br/>bigint[], <br/>bigint[]) </p></td><td class="confluenceTd">text </td><td class="confluenceTd"><p align="LEFT">nb_probabilities(classes, attr_count, <br/>class_count, class_total)</p><p align="LEFT"> </p></td><td class="confluenceTd"><p align="LEFT">Determine probability for each class using a Naive Bayes Classifier. This aggregate uses a baseline of training data to predict the classification of new rows and returns the probabilities that each class will appear in new rows.</p></td></tr></tbody></table></div><p> </p><p> </p><p> </p><p> </p>
</div>
		
		</main><!--end of content-->

  </div><!-- end of container -->

  <script type="text/javascript">
    (function() {
      var didInit = false;
      function initMunchkin() {
        if(didInit === false) {
          didInit = true;
          Munchkin.init('625-IUJ-009');
        }
      }
      var s = document.createElement('script');
      s.type = 'text/javascript';
      s.async = true;
      s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
      s.onreadystatechange = function() {
        if (this.readyState == 'complete' || this.readyState == 'loaded') {
          initMunchkin();
        }
      };
      s.onload = initMunchkin;
      document.getElementsByTagName('head')[0].appendChild(s);
    })();
  </script>
</div><!--end of wrap-->
</div><!--end of viewport-->

<div id="scrim"></div>

<div class="container">
  <footer class="site-footer-links">
    <div class="copyright">
      <a href='/'>Pivotal Documentation</a>
      &copy; 2014 <a href='http://pivotal.io'>Pivotal Software</a> Inc. All Rights Reserved.
  </div>
  <div class="support">
    Need help? <a href="http://support.pivotal.io" target="_blank">Visit support</a>
  </footer>
</div><!--end of container-->

</body>
</html>


            
      
      
      
      