
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="Defines a new database role (user or group). Synopsis CREATE ROLE name [[WITH] option [ ... ]] where option can be: SUPERUSER | NOSUPERUSER | CREATEDB | NOCREATEDB | CREATE-ROLE | NOCREATE-ROLE     | ..."/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="copyright" content="(C) Copyright 2005"/><meta name="DC.rights.owner" content="(C) Copyright 2005"/><meta name="DC.Type" content="topic"/><meta name="DC.Title" content="CREATE ROLE"/><meta name="DC.Relation" scheme="URI" content="../hawq-topics/SQLCommandReference.html"/><meta name="prodname" content=""/><meta name="version" content="2.1.0"/><meta name="release" content=""/><meta name="modification" content=""/><meta name="DC.Format" content="XHTML"/><meta name="DC.Identifier" content="topic1"/><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>CREATE ROLE</title><meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Type" content="text/html; charset=utf-8"><!----></meta><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/pivotal.css"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" id="topic1"><script xmlns="http://www.w3.org/1999/xhtml" src="//use.typekit.net/clb0qji.js" type="text/javascript"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			  try {
				  Typekit.load();
			  } catch (e) {
			  }
		  </script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			  document.domain = "pivotal.io";
		  </script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			WebFontConfig = {
			  google: { families: [ 'Source+Sans+Pro:300italic,400italic,300,400,600:latin' ] }
			};
			(function() {
			  var wf = document.createElement('script');
			  wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
				'://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
			  wf.type = 'text/javascript';
			  wf.async = 'true';
			  var s = document.getElementsByTagName('script')[0];
			  s.parentNode.insertBefore(wf, s);
			})();
		  </script>
<table class="nav"><tbody><tr><td colspan="2"><div id="permalink"><a href="#">linkToThis</a></div><div id="printlink"><a href="javascript:window.print();">printThisPage</a></div></td></tr><tr><td><div class="navheader">
<span class="navparent"><a class="link" href="../hawq-topics/SQLCommandReference.html" title="SQL Command Reference"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">SQL Command Reference</span></a></span>  </div></td><td width="75%"><a class="navheader_parent_path" href="../hawq-topics/../hawq-topics/HAWQAdministration.html" title="HAWQ Administration">HAWQ Administration</a> / <a class="navheader_parent_path" href="../hawq-topics/SQLCommandReference.html" title="SQL Command Reference">SQL Command Reference</a></td></tr></tbody></table>

   <h1 class="title topictitle1">CREATE ROLE</h1>

   <div class="body">
      <p class="p" id="topic1__sql_command_desc">Defines a new database role (user or group).</p>

      <div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2>
         
         <pre class="pre codeblock" id="topic1__sql_command_synopsis">CREATE ROLE <var class="keyword varname">name</var> [[WITH] <var class="keyword varname">option</var> [ ... ]]</pre>

         <p class="p">where <var class="keyword varname">option</var> can be:</p>

         <pre class="pre codeblock">      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATE-ROLE | NOCREATE-ROLE
    | CREATEEXTTABLE | NOCREATEEXTTABLE 
      [ ( <var class="keyword varname">attribute</var>='<var class="keyword varname">value</var>'[, ...] ) ]
           where <var class="keyword varname">attributes</var> and <var class="keyword varname">value</var> are:
           type='readable'|'writable'
           protocol='gpfdist'|'http'
    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | CONNECTION LIMIT <var class="keyword varname">connlimit</var>
    | [ ENCRYPTED | UNENCRYPTED ] PASSWORD '<var class="keyword varname">password</var>'
    | VALID UNTIL '<var class="keyword varname">timestamp</var>' 
    | IN ROLE <var class="keyword varname">rolename</var> [, ...]
    | ROLE <var class="keyword varname">rolename</var> [, ...]
    | ADMIN <var class="keyword varname">rolename</var> [, ...]
    | RESOURCE QUEUE <var class="keyword varname">queue_name</var>
    | [ DENY <var class="keyword varname">deny_point</var> ]
    | [ DENY BETWEEN <var class="keyword varname">deny_point</var> AND <var class="keyword varname">deny_point</var>]</pre>

      </div>

      <div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2>
         
         <p class="p">
            <samp class="ph codeph">CREATE ROLE</samp> adds a new role to a HAWQ system. A role is an entity
                that can own database objects and have database privileges. A role can be considered
                a user, a group, or both depending on how it is used. You must have
                    <samp class="ph codeph">CREATE-ROLE</samp> privilege or be a database superuser to use this
                command. </p>

         <p class="p">Note that roles are defined at the system-level and are valid for all databases in
                your HAWQ system.</p>

      </div>

      <div class="section" id="topic1__section4"><h2 class="title sectiontitle">Parameters</h2>
         
         <dl class="dl parml">
            
               <dt class="dt pt dlterm">
                  <var class="keyword varname">name</var>
               </dt>

               <dd class="dd pd">The name of the new role. </dd>

            
            
               <dt class="dt pt dlterm">SUPERUSER</dt>

               <dt class="dt pt dlterm">NOSUPERUSER</dt>

               <dd class="dd pd">If <samp class="ph codeph">SUPERUSER</samp> is specified, the role being defined will be a
                        superuser, who can override all access restrictions within the database.
                        Superuser status is dangerous and should be used only when really needed.
                        You must yourself be a superuser to create a new superuser.
                            <samp class="ph codeph">NOSUPERUSER</samp> is the default.</dd>

            
            
               <dt class="dt pt dlterm">CREATEDB</dt>

               <dt class="dt pt dlterm">NOCREATEDB</dt>

               <dd class="dd pd">If <samp class="ph codeph">CREATEDB</samp> is specified, the role being defined will be
                        allowed to create new databases. <samp class="ph codeph">NOCREATEDB</samp> (the default)
                        will deny a role the ability to create databases.</dd>

            
            
               <dt class="dt pt dlterm">CREATE-ROLE</dt>

               <dt class="dt pt dlterm">NOCREATE-ROLE</dt>

               <dd class="dd pd">If <samp class="ph codeph">CREATEDB</samp> is specified, the role being defined will be
                        allowed to create new roles, alter other roles, and drop other roles.
                            <samp class="ph codeph">NOCREATE-ROLE</samp> (the default) will deny a role the ability
                        to create roles or modify roles other than their own.</dd>

            
            
               <dt class="dt pt dlterm">CREATEEXTTABLE</dt>

               <dt class="dt pt dlterm">NOCREATEEXTTABLE</dt>

               <dd class="dd pd">If <samp class="ph codeph">CREATEEXTTABLE</samp> is specified, the role being defined is
                        allowed to create external tables. The default <samp class="ph codeph">type</samp> is
                            <samp class="ph codeph">readable</samp> and the default <samp class="ph codeph">protocol</samp> is
                            <samp class="ph codeph">gpfdist</samp> if not specified.
                            <samp class="ph codeph">NOCREATEEXTTABLE</samp> (the default) denies the role the
                        ability to create external tables. Note that external tables that use the
                            <samp class="ph codeph">file</samp> or <samp class="ph codeph">execute</samp> protocols can only be
                        created by superusers.</dd>

            
            
               <dt class="dt pt dlterm">INHERIT</dt>

               <dt class="dt pt dlterm">NOINHERIT</dt>

               <dd class="dd pd">If specified, <samp class="ph codeph">INHERIT</samp> (the default) allows the role to use
                        whatever database privileges have been granted to all roles it is directly
                        or indirectly a member of. With <samp class="ph codeph">NOINHERIT</samp>, membership in
                        another role only grants the ability to <samp class="ph codeph">SET ROLE</samp> to that
                        other role.</dd>

            
            
               <dt class="dt pt dlterm">LOGIN</dt>

               <dt class="dt pt dlterm">NOLOGIN</dt>

               <dd class="dd pd">If specified, <samp class="ph codeph">LOGIN</samp> allows a role to log in to a database.
                        A role having the <samp class="ph codeph">LOGIN</samp> attribute can be thought of as a
                        user. Roles with <samp class="ph codeph">NOLOGIN</samp> (the default) are useful for
                        managing database privileges, and can be thought of as groups.</dd>

            
            
               <dt class="dt pt dlterm">CONNECTION LIMIT <var class="keyword varname">connlimit</var>
               </dt>

               <dd class="dd pd">The number maximum of concurrent connections this role can make. The default
                        of -1 means there is no limitation.</dd>

            
         </dl>

         <dl class="dl parml">
            
               <dt class="dt pt dlterm">PASSWORD <var class="keyword varname">password</var>
               </dt>

               <dd class="dd pd">Sets the user password for roles with the <samp class="ph codeph">LOGIN</samp> attribute.
                        If you do not plan to use password authentication you can omit this option.
                        If no password is specified, the password will be set to null and password
                        authentication will always fail for that user. A null password can
                        optionally be written explicitly as <samp class="ph codeph">PASSWORD NULL</samp>. </dd>

            
            
               <dt class="dt pt dlterm">ENCRYPTED</dt>

               <dt class="dt pt dlterm">UNENCRYPTED</dt>

               <dd class="dd pd">These key words control whether the password is stored encrypted in the
                        system catalogs. (If neither is specified, the default behavior is
                        determined by the configuration parameter
                            <var class="keyword varname">password_encryption</var>.) If the presented password
                        string is already in MD5-encrypted format, then it is stored encrypted
                        as-is, regardless of whether <samp class="ph codeph">ENCRYPTED</samp> or
                            <samp class="ph codeph">UNENCRYPTED</samp> is specified (since the system cannot
                        decrypt the specified encrypted password string). This allows reloading of
                        encrypted passwords during dump/restore.</dd>

               <dd class="dd pd">Note that older clients may lack support for the MD5 authentication
                        mechanism that is needed to work with passwords that are stored encrypted.
                    </dd>

            
            
               <dt class="dt pt dlterm">VALID UNTIL '<var class="keyword varname">timestamp</var>'</dt>

               <dd class="dd pd">The VALID UNTIL clause sets a date and time after which the role's password
                        is no longer valid. If this clause is omitted the password will never
                        expire. </dd>

            
            
               <dt class="dt pt dlterm">IN ROLE <var class="keyword varname">rolename</var>
               </dt>

               <dd class="dd pd">Adds the new role as a member of the named roles. Note that there is no
                        option to add the new role as an administrator; use a separate
                            <samp class="ph codeph">GRANT</samp> command to do that.</dd>

            
            
               <dt class="dt pt dlterm">ROLE <var class="keyword varname">rolename</var>
               </dt>

               <dd class="dd pd">Adds the named roles as members of this role, making this new role a
                        group.</dd>

            
            
               <dt class="dt pt dlterm">ADMIN <var class="keyword varname">rolename</var>
               </dt>

               <dd class="dd pd">The <samp class="ph codeph">ADMIN</samp> clause is like <samp class="ph codeph">ROLE</samp>, but the
                        named roles are added to the new role <samp class="ph codeph">WITH ADMIN OPTION</samp>,
                        giving them the right to grant membership in this role to others.</dd>

            
            
               <dt class="dt pt dlterm">RESOURCE QUEUE <var class="keyword varname">queue_name</var>
               </dt>

               <dd class="dd pd">The name of the resource queue to which the new user-level role is to be
                        assigned. Only roles with <samp class="ph codeph">LOGIN</samp> privilege can be assigned
                        to a resource queue. The special keyword <samp class="ph codeph">NONE</samp> means that
                        the role is assigned to the default resource queue. A role can only belong
                        to one resource queue.</dd>

            
            
               <dt class="dt pt dlterm">DENY <var class="keyword varname">deny_point</var>
               </dt>

               <dt class="dt pt dlterm">DENY BETWEEN <var class="keyword varname">deny_point</var> AND
                        <var class="keyword varname">deny_point</var>
               </dt>

               <dd class="dd pd">The <samp class="ph codeph">DENY</samp> and <samp class="ph codeph">DENY BETWEEN</samp> keywords set
                        time-based constraints that are enforced at login. <samp class="ph codeph">DENY</samp>
                        sets a day or a day and time to deny access. <samp class="ph codeph">DENY BETWEEN</samp>
                        sets an interval during which access is denied. Both use the parameter
                            <var class="keyword varname">deny_point</var> that has the following format:</dd>

               <dd class="dd pd">
                  <pre class="pre codeblock">DAY day [ TIME 'time' ]</pre>

               </dd>

               <dd class="dd pd">The two parts of the <samp class="ph codeph">deny_point</samp> parameter use the following
                        formats:</dd>

               <dd class="dd pd">
                  <p class="p">For <samp class="ph codeph">day</samp>:</p>

                  <pre class="pre codeblock">{'Sunday' | 'Monday' | 'Tuesday' |'Wednesday' | 'Thursday' | 'Friday' | 
'Saturday' | 0-6 }</pre>

                  <p class="p">For <samp class="ph codeph">time</samp>:</p>

                  <pre class="pre codeblock">{ 00-23 : 00-59 | 01-12 : 00-59 { AM | PM }}</pre>

               </dd>

               <dd class="dd pd">The <samp class="ph codeph">DENY BETWEEN</samp> clause uses two
                            <var class="keyword varname">deny_point</var> parameters:</dd>

               <dd class="dd pd">
                  <pre class="pre codeblock">DENY BETWEEN <var class="keyword varname">deny_point</var> AND <var class="keyword varname">deny_point</var>
                  </pre>

               </dd>

            
         </dl>

      </div>

      <div class="section" id="topic1__section5"><h2 class="title sectiontitle">Notes</h2>
         
         <p class="p">The preferred way to add and remove role members (manage groups) is to use
                        <samp class="ph codeph">
               <a class="xref" href="GRANT.html">GRANT</a>
            </samp> and <samp class="ph codeph">
               <a class="xref" href="REVOKE.html">REVOKE</a>
            </samp>. </p>

         <p class="p">The <samp class="ph codeph">VALID UNTIL</samp> clause defines an expiration time for a password
                only, not for the role. The expiration time is not enforced when logging in using a
                non-password-based authentication method. </p>

         <p class="p">The <samp class="ph codeph">INHERIT</samp> attribute governs inheritance of grantable privileges
                (access privileges for database objects and role memberships). It does not apply to
                the special role attributes set by <samp class="ph codeph">CREATE ROLE</samp> and <samp class="ph codeph">ALTER
                    ROLE</samp>. For example, being a member of a role with
                    <samp class="ph codeph">CREATEDB</samp> privilege does not immediately grant the ability to
                create databases, even if <samp class="ph codeph">INHERIT</samp> is set.</p>

         <p class="p">The <samp class="ph codeph">INHERIT</samp> attribute is the default for reasons of backwards
                compatibility. In prior releases of HAWQ, users always had access to all privileges
                of groups they were members of. However, <samp class="ph codeph">NOINHERIT</samp> provides a
                closer match to the semantics specified in the SQL standard.</p>

         <p class="p">Be careful with the <samp class="ph codeph">CREATE-ROLE</samp> privilege. There is no concept of
                inheritance for the privileges of a <samp class="ph codeph">CREATE-ROLE</samp>-role. That means
                that even if a role does not have a certain privilege but is allowed to create other
                roles, it can easily create another role with different privileges than its own
                (except for creating roles with superuser privileges). For example, if a role has
                the <samp class="ph codeph">CREATE-ROLE</samp> privilege but not the <samp class="ph codeph">CREATEDB</samp>
                privilege, it can create a new role with the <samp class="ph codeph">CREATEDB</samp> privilege.
                Therefore, regard roles that have the <samp class="ph codeph">CREATE-ROLE</samp> privilege as
                almost-superuser-roles. </p>

         <p class="p">The <samp class="ph codeph">CONNECTION LIMIT</samp> option is never enforced for superusers. </p>

         <p class="p">Caution must be exercised when specifying an unencrypted password with this command.
                The password will be transmitted to the server in clear-text, and it might also be
                logged in the client's command history or the server log. The client program
                    <samp class="ph codeph">createuser</samp>, however, transmits the password encrypted. Also,
                psql contains a command <samp class="ph codeph">\password</samp> that can be used to safely change
                the password later.</p>

      </div>

      <div class="section" id="topic1__section6"><h2 class="title sectiontitle">Examples</h2>
         
         <p class="p">Create a role that can log in, but don't give it a password:</p>

         <pre class="pre codeblock">CREATE ROLE jonathan LOGIN;</pre>

         <p class="p">Create a role that belongs to a resource queue:</p>

         <pre class="pre codeblock">CREATE ROLE jonathan LOGIN RESOURCE QUEUE poweruser;</pre>

         <p class="p">Create a role with a password that is valid until the end of 2009 (<samp class="ph codeph">CREATE
                    USER</samp> is the same as <samp class="ph codeph">CREATE ROLE</samp> except that it implies
                    <samp class="ph codeph">LOGIN</samp>):</p>

         <pre class="pre codeblock">CREATE USER joelle WITH PASSWORD 'jw8s0F4' VALID UNTIL '2010-01-01';</pre>

         <p class="p">Create a role that can create databases and manage other roles:</p>

         <pre class="pre codeblock">CREATE ROLE admin WITH CREATEDB CREATE-ROLE;</pre>

         <p class="p">Create a role that does not allow login access on Sundays:</p>

         <pre class="pre codeblock">CREATE ROLE user3 DENY DAY 'Sunday';</pre>

      </div>

      <div class="section" id="topic1__section7"><h2 class="title sectiontitle">Compatibility</h2>
         
         <p class="p">The SQL standard defines the concepts of users and roles, but it regards them as
                distinct concepts and leaves all commands defining users to be specified by the
                database implementation. In HAWQ, users and roles are unified into a single type of
                object. Roles therefore have many more optional attributes than they do in the
                standard. </p>

         <p class="p">
            <samp class="ph codeph">CREATE ROLE</samp> is in the SQL standard, but the standard only requires
                the syntax:</p>

         <pre class="pre codeblock">CREATE ROLE name [WITH ADMIN rolename]</pre>

         <p class="p">Allowing multiple initial administrators, and all the other options of <samp class="ph codeph">CREATE
                    ROLE</samp>, are HAWQ extensions.</p>

         <p class="p">The behavior specified by the SQL standard is most closely approximated by giving
                users the <samp class="ph codeph">NOINHERIT</samp> attribute, while roles are given the
                    <samp class="ph codeph">INHERIT</samp> attribute.</p>

      </div>

      <div class="section" id="topic1__section8"><h2 class="title sectiontitle">See Also</h2>
         
         <p class="p">
            <samp class="ph codeph">
               <a class="xref" href="SET-ROLE.html">SET ROLE</a>
            </samp>,
                        <samp class="ph codeph">
               <a class="xref" href="ALTER-ROLE.html">ALTER ROLE</a>
            </samp>, <samp class="ph codeph">
               <a class="xref" href="DROP-ROLE.html">DROP ROLE</a>
            </samp>, <samp class="ph codeph">
               <a class="xref" href="GRANT.html">GRANT</a>
            </samp>, <samp class="ph codeph">
               <a class="xref" href="REVOKE.html">REVOKE</a>
            </samp>,
                        <samp class="ph codeph">
               <a class="xref" href="CREATE-RESOURCE-QUEUE.html">CREATE RESOURCE QUEUE</a>
            </samp>
         </p>

      </div>

   </div>

<div class="related-links"/>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../hawq-topics/SQLCommandReference.html" title="SQL Command Reference"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">SQL Command Reference</span></a></span>  </div><div>
<div class="container">
  <footer class="site-footer-links">
    <div class="copyright">
      <a href="http://docs.pivotal.io" target="_blank">Pivotal Documentation</a>
      © 2014 <a href="http://www.pivotal.io/" target="_blank">Pivotal Software</a>, Inc. All Rights Reserved.
  </div>
  <div class="support">
    Need help? <a href="http://support.pivotal.io" target="_blank">Visit Support</a>
   </div>
  </footer>
</div><!--end of container-->
</div>
</body>
</html>