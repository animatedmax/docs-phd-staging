
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="Extracts the metadata of a specified table into a YAML file. Synopsis gpextract [ -h hostname] [ -p port] [ -U username] [ -d database] [ -o output_file] [ -W ] &lt;tablename&gt; gpextract -? gpextract ..."/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="copyright" content="(C) Copyright 2005"/><meta name="DC.rights.owner" content="(C) Copyright 2005"/><meta name="DC.Type" content="topic"/><meta name="DC.Title" content="gpextract"/><meta name="DC.Relation" scheme="URI" content="../hawq-topics/ManagementUtilityReference.html"/><meta name="prodname" content=""/><meta name="version" content="2.1.0"/><meta name="release" content=""/><meta name="modification" content=""/><meta name="DC.Format" content="XHTML"/><meta name="DC.Identifier" content="gpextract"/><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>gpextract</title><meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Type" content="text/html; charset=utf-8"><!----></meta><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/pivotal.css"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" id="gpextract"><script xmlns="http://www.w3.org/1999/xhtml" src="//use.typekit.net/clb0qji.js" type="text/javascript"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			  try {
				  Typekit.load();
			  } catch (e) {
			  }
		  </script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			  document.domain = "pivotal.io";
		  </script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			WebFontConfig = {
			  google: { families: [ 'Source+Sans+Pro:300italic,400italic,300,400,600:latin' ] }
			};
			(function() {
			  var wf = document.createElement('script');
			  wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
				'://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
			  wf.type = 'text/javascript';
			  wf.async = 'true';
			  var s = document.getElementsByTagName('script')[0];
			  s.parentNode.insertBefore(wf, s);
			})();
		  </script>
<table class="nav"><tbody><tr><td colspan="2"><div id="permalink"><a href="#">linkToThis</a></div><div id="printlink"><a href="javascript:window.print();">printThisPage</a></div></td></tr><tr><td><div class="navheader">
<span class="navparent"><a class="link" href="../hawq-topics/ManagementUtilityReference.html" title="Management Utility Reference"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Management Utility Reference</span></a></span>  </div></td><td width="75%"><a class="navheader_parent_path" href="../hawq-topics/../hawq-topics/HAWQAdministration.html" title="HAWQ Administration">HAWQ Administration</a> / <a class="navheader_parent_path" href="../hawq-topics/ManagementUtilityReference.html" title="Management Utility Reference">Management Utility Reference</a></td></tr></tbody></table>

  <h1 class="title topictitle1">gpextract</h1>

  <div class="body">
    <p class="p">Extracts the metadata of a specified table into a YAML file.</p>

    <div class="section"><h2 class="title sectiontitle">Synopsis</h2>
      
      <pre class="pre codeblock"><strong class="ph b">gpextract</strong> [<strong class="ph b">-h</strong> hostname] [<strong class="ph b">-p</strong> port] [<strong class="ph b">-U</strong> username] [<strong class="ph b">-d</strong> database] 
     [<strong class="ph b">-o</strong> output_file] [<strong class="ph b">-W</strong>] <strong class="ph b">&lt;tablename&gt;</strong>

<strong class="ph b">gpextract</strong> <strong class="ph b">-?</strong>

<strong class="ph b">gpextract</strong> <strong class="ph b">--version</strong></pre>

    </div>

    <div class="section"><h2 class="title sectiontitle">Description</h2>
      
      <p class="p"><samp class="ph codeph">gpextract</samp> is a utility that extracts a table's metadata into a YAML
        formatted file. HAWQ's InputFormat uses this YAML-formatted file to read a HAWQ file stored
        on HDFS directly into the MapReduce program.</p>

      <div class="note note"><span class="notetitle">Note:</span> <samp class="ph codeph">gpextract</samp> is bound by the following rules:<ul class="ul" id="gpextract__ul_q4g_fzx_yp">
          <li class="li">You must start up HAWQ to use <samp class="ph codeph">gpextract</samp>.</li>

          <li class="li"><samp class="ph codeph">gpextract</samp> only supports AO and Parquet tables.</li>

          <li class="li"><samp class="ph codeph">gpextract</samp> supports partitioned tables, but does not support
            sub-partitions.</li>

        </ul>
</div>

    </div>

    <div class="section"><h2 class="title sectiontitle">Arguments</h2>
      
      <dl class="dl parml">
        
          <dt class="dt pt dlterm">&lt;tablename&gt;</dt>

          <dd class="dd pd">Name of the table that you need to extract metadata. You can use the format
              <var class="keyword varname">namespace_name.table_name</var>.</dd>

        
      </dl>

    </div>

    <div class="section"><h2 class="title sectiontitle">Options</h2>
      
      <dl class="dl parml">
        
          <dt class="dt pt dlterm">-o <var class="keyword varname">output_file</var></dt>

          <dd class="dd pd">Is the name of a file that <samp class="ph codeph">gpextract</samp> uses to write the metadata. If
            you do not specify a name, <samp class="ph codeph">gpextract</samp> writes to
            <samp class="ph codeph">stdout</samp>.</dd>

        
      </dl>

      <dl class="dl parml">
        
          <dt class="dt pt dlterm">-v (verbose mode)</dt>

          <dd class="dd pd">Optional. Displays the verbose output of the extraction process.</dd>

        
      </dl>

      <dl class="dl parml">
        
          <dt class="dt pt dlterm">-? (help)</dt>

          <dd class="dd pd">Displays the online help.</dd>

        
        
          <dt class="dt pt dlterm">--version</dt>

          <dd class="dd pd">Displays the version of this utility.</dd>

        
      </dl>

    </div>

    <div class="section"><h2 class="title sectiontitle">Connection Options</h2>
      
      <dl class="dl parml">
        
          <dt class="dt pt dlterm">-d <var class="keyword varname">database</var></dt>

          <dd class="dd pd">The database to connect to. If not specified, it reads from the environment variable
              <samp class="ph codeph">$PGDATABASE</samp> or defaults to <samp class="ph codeph">template1</samp>.</dd>

        
        
          <dt class="dt pt dlterm">-h <var class="keyword varname">hostname</var></dt>

          <dd class="dd pd">Specifies the host name of the machine on which the HAWQ master database server is
            running. If not specified, it reads from the environment variable
              <samp class="ph codeph">$PGHOST</samp> or defaults to <samp class="ph codeph">localhost</samp>.</dd>

        
        
          <dt class="dt pt dlterm">-p <var class="keyword varname">port</var></dt>

          <dd class="dd pd">Specifies the TCP port on which the HAWQ master database server is listening for
            connections. If not specified, reads from the environment variable
              <samp class="ph codeph">$PGPORT</samp> or defaults to 5432.</dd>

        
        
          <dt class="dt pt dlterm">-U <var class="keyword varname">username</var></dt>

          <dd class="dd pd">The database role name to connect as. If not specified, reads from the environment
            variable <samp class="ph codeph">$PGUSER</samp> or defaults to the current system user name.</dd>

        
        
          <dt class="dt pt dlterm">-W (force password prompt)</dt>

          <dd class="dd pd">Force a password prompt. If not specified, reads the password from the environment
            variable <samp class="ph codeph">$PGPASSWORD</samp> or from a password file specified by
              <samp class="ph codeph">$PGPASSFILE</samp> or in <samp class="ph codeph">~/.pgpass</samp>.</dd>

        
      </dl>

    </div>

    <div class="section"><h2 class="title sectiontitle">Metadata File Format</h2>
      
      <p class="p"><samp class="ph codeph">gpextract</samp> exports the table metadata into a file using YAML 1.1 document
        format. The file contains various key information about the table, such as table schema,
        data file locations and sizes, partition constraints and so on.</p>

      <p class="p">The basic structure of the metadata file is as follows:</p>

      <pre class="pre codeblock">Version: string (1.0.0)
DBVersion: string 
FileFormat: string (AO/Parquet) 
TableName: string (schemaname.tablename)
DFS_URL: string (hdfs://127.0.0.1:9000)
Encoding: UTF8
AO_Schema: 
	- name: string
 	  type: string
 
AO_FileLocations:
	  Blocksize: int
 	  Checksum: boolean
	  CompressionType: string
	  CompressionLevel: int
	  PartitionBy: string ('PARTITION BY ...')
	  Files:
	  - path: string (/gpseg0/16385/35469/35470.1)
	  size: long
 
	  Partitions:
	  - Blocksize: int
	    Checksum: Boolean
	    CompressionType: string
	    CompressionLevel: int
	    Name: string
	    Constraint: string (PARTITION Jan08 START (date '2008-01-01') INCLUSIVE)
	    Files:
	    - path: string
	      size: long

 
Parquet_FileLocations:
  RowGroupSize: long
  PageSize: long
  CompressionType: string
  CompressionLevel: int
  Checksum: boolean
  EnableDictionary: boolean
  PartitionBy: string
  Files:
  - path: string
    size: long
  Partitions:
  - Name: string
    RowGroupSize: long
    PageSize: long
    CompressionType: string
    CompressionLevel: int
    Checksum: boolean
    EnableDictionary: boolean
    Constraint: string
    Files:
    - path: string
      size: long</pre>

    </div>

    <div class="section"><h2 class="title sectiontitle">Example: Extracting an AO table</h2>
      
      <p class="p">Extract the <samp class="ph codeph">rank</samp> table's metadata into a file named
          <samp class="ph codeph">rank_table.yaml</samp>:</p>

      <pre class="pre codeblock">$ gpextract -o rank_table.yaml rank</pre>

      <p class="p">
        <strong class="ph b">Output content in rank_table.yaml</strong>
      </p>

      <pre class="pre codeblock">AO_FileLocations:
	Blocksize: 32768
	Checksum: false
	CompressionLevel: 0
	CompressionType: null
	Files:
	- path: /gpseg0/16385/35469/35692.1
	  size: 0
	- path: /gpseg1/16385/35469/35692.1
	  size: 0
	PartitionBy: PARTITION BY list (gender)
	Partitions:
	- Blocksize: 32768
	  Checksum: false
	  CompressionLevel: 0
	  CompressionType: null
	  Constraint: PARTITION girls VALUES('F') WITH (appendonly=true)
	Files:
	- path: /gpseg0/16385/35469/35697.1
	  size: 0
	- path: /gpseg1/16385/35469/35697.1
	  size: 0
	  Name: girls
	- Blocksize: 32768
	  Checksum: false
	  CompressionLevel: 0
	  CompressionType: null
	  Constraint: PARTITION boys VALUES('M') WITH (appendonly=true)
	  Files:
	  - path: /gpseg0/16385/35469/35703.1
	    size: 0
	  - path: /gpseg1/16385/35469/35703.1
	    size: 0
	  Name: boys
	- Blocksize: 32768
	  Checksum: false
	  CompressionLevel: 0
	  CompressionType: null
	  Constraint: DEFAULT PARTITION other WITH appendonly=true)
	  Files:
	  - path: /gpseg0/16385/35469/35709.1
	    size: 90071728
	  - path: /gpseg1/16385/35469/35709.1
	    size: 90071512
	  Name: other
	AO_Schema:
	- name: id
	  type: int4
	- name: rank
	  type: int4
	- name: year
	  type: int4
	- name: gender
	  type: bpchar
	- name: count
 	  type: int4
	DFS_URL: hdfs://127.0.0.1:9000
	Encoding: UTF8
	FileFormat: AO
	TableName: public.rank
	Version: 1.0.0</pre>

    </div>

    <div class="section"><h2 class="title sectiontitle">Example: Extracting a Parquet table</h2>
      
      <p class="p">Extract the <samp class="ph codeph">orders</samp> table's metadata into a file named
          <samp class="ph codeph">orders.yaml</samp>:</p>

      <pre class="pre codeblock">$ gpextract –o orders.yaml orders</pre>

      <p class="p">
        <strong class="ph b">Output content in orders.yaml</strong>
      </p>

      <pre class="pre codeblock">DFS_URL: hdfs://127.0.0.1:9000
Encoding: UTF8
FileFormat: Parquet
TableName: public.orders
Version: 1.0.0
Parquet_FileLocations:
  Checksum: false
  CompressionLevel: 0
  CompressionType: none
  EnableDictionary: false
  Files:
  - path: /hawq-data/gpseg0/16385/16626/16657.1
    size: 0
  - path: /hawq-data/gpseg1/16385/16626/16657.1
    size: 0
  PageSize: 1048576
  PartitionBy: PARTITION BY range (o_orderdate)
  Partitions:
  - Checksum: false
    CompressionLevel: 0
    CompressionType: none
    Constraint: PARTITION p1_1 START ('1992-01-01'::date) END ('1994-12-31'::date)
      EVERY ('3 years'::interval) WITH (appendonly=true, orientation=parquet, pagesize=1048576,
      rowgroupsize=8388608, compresstype=none, compresslevel=0)
    EnableDictionary: false
    Files:
    - path: /hawq-data/gpseg0/16385/16626/16662.1
      size: 8140599
    - path: /hawq-data/gpseg1/16385/16626/16662.1
      size: 8099760
    Name: orders_1_prt_p1_1
    PageSize: 1048576
    RowGroupSize: 8388608
  - Checksum: false
    CompressionLevel: 0
    CompressionType: none
    Constraint: PARTITION p1_11 START ('1995-01-01'::date) END ('1997-12-31'::date)
      EVERY ('e years'::interval) WITH (appendonly=true, orientation=parquet, pagesize=1048576,
      rowgroupsize=8388608, compresstype=none, compresslevel=0)
    EnableDictionary: false
    Files:
    - path: /hawq-data/gpseg0/16385/16626/16668.1
      size: 8088559
    - path: /hawq-data/gpseg1/16385/16626/16668.1
      size: 8075056
    Name: orders_1_prt_p1_11
    PageSize: 1048576
    RowGroupSize: 8388608
  - Checksum: false
    CompressionLevel: 0
    CompressionType: none
    Constraint: PARTITION p1_21 START ('1998-01-01'::date) END ('2000-12-31'::date)
      EVERY ('3 years'::interval) WITH (appendonly=true, orientation=parquet, pagesize=1048576,
      rowgroupsize=8388608, compresstype=none, compresslevel=0)
    EnableDictionary: false
    Files:
    - path: /hawq-data/gpseg0/16385/16626/16674.1
      size: 8065770
    - path: /hawq-data/gpseg1/16385/16626/16674.1
      size: 8126669
    Name: orders_1_prt_p1_21
    PageSize: 1048576
    RowGroupSize: 8388608
  RowGroupSize: 8388608</pre>

    </div>

    <div class="section"><h2 class="title sectiontitle">See Also</h2>
      
      <p class="p"><samp class="ph codeph"><a class="xref" href="gpload.html#topic1">gpload</a></samp></p>

    </div>

  </div>

<div class="related-links"/>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../hawq-topics/ManagementUtilityReference.html" title="Management Utility Reference"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Management Utility Reference</span></a></span>  </div><div>
<div class="container">
  <footer class="site-footer-links">
    <div class="copyright">
      <a href="http://docs.pivotal.io" target="_blank">Pivotal Documentation</a>
      © 2014 <a href="http://www.pivotal.io/" target="_blank">Pivotal Software</a>, Inc. All Rights Reserved.
  </div>
  <div class="support">
    Need help? <a href="http://support.pivotal.io" target="_blank">Visit Support</a>
   </div>
  </footer>
</div><!--end of container-->
</div>
</body>
</html>