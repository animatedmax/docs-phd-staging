
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="About Hive Installing Hive Hive Components Prerequisites Hive RPM Packages Installing DB for Hive Metastore Hive MetaStore Server Setup Hive Server Setup Hive Server2 Setup Hive Configuration Hive ..."/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="copyright" content="(C) Copyright 2005"/><meta name="DC.rights.owner" content="(C) Copyright 2005"/><meta name="DC.Type" content="topic"/><meta name="DC.Title" content="Hive"/><meta name="DC.Relation" scheme="URI" content="../topics/ManuallyInstallingandUsingPivotalHD21Stack.html"/><meta name="prodname" content=""/><meta name="version" content="2.1.0"/><meta name="release" content=""/><meta name="modification" content=""/><meta name="DC.Format" content="XHTML"/><meta name="DC.Identifier" content="hive"/><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>Hive</title><meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Type" content="text/html; charset=utf-8"><!----></meta><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/pivotal.css"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" id="hive"><script xmlns="http://www.w3.org/1999/xhtml" src="//use.typekit.net/clb0qji.js" type="text/javascript"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			  try {
				  Typekit.load();
			  } catch (e) {
			  }
		  </script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			  document.domain = "pivotal.io";
		  </script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			WebFontConfig = {
			  google: { families: [ 'Source+Sans+Pro:300italic,400italic,300,400,600:latin' ] }
			};
			(function() {
			  var wf = document.createElement('script');
			  wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
				'://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
			  wf.type = 'text/javascript';
			  wf.async = 'true';
			  var s = document.getElementsByTagName('script')[0];
			  s.parentNode.insertBefore(wf, s);
			})();
		  </script>
<table class="nav"><tbody><tr><td colspan="2"><div id="permalink"><a href="#" title="Link to this page"/></div><div id="printlink"><a href="javascript:window.print();" title="Print this page"/></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../topics/../topics/StackandToolsReference.html" title="Stack and Tools Reference">Stack and Tools Reference</a> / <a class="navheader_parent_path" href="../topics/ManuallyInstallingandUsingPivotalHD21Stack.html" title="Manually Installing and Using Pivotal HD 2.1 Stack">Manually Installing and Using Pivotal HD 2.1 Stack</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../topics/ManuallyInstallingandUsingPivotalHD21Stack.html" title="Manually Installing and Using Pivotal HD 2.1 Stack"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Manually Installing and Using Pivotal HD 2.1 Stack</span></a></span>  </div></td></tr></tbody></table>

   <h1 class="title topictitle1">Hive</h1>

   <div class="body">
      <ul class="ul">
         <li class="li"><a class="xref" href="#abouthive">About Hive</a>
         </li>

         <li class="li"><a class="xref" href="#installinghive">Installing Hive</a>
            <ul class="ul">
               <li class="li"><a class="xref" href="#hivecomponents">Hive Components</a>
               </li>

               <li class="li"><a class="xref" href="#prerequisites">Prerequisites</a>
               </li>

               <li class="li"><a class="xref" href="#hiverpmpackages">Hive RPM Packages</a>
               </li>

               <li class="li"><a class="xref" href="#installingdbforhivemetastore">Installing DB for Hive Metastore</a>
               </li>

               <li class="li"><a class="xref" href="#hivemetastoreserversetup">Hive MetaStore Server Setup</a>
               </li>

               <li class="li"><a class="xref" href="#hiveserversetup">Hive Server Setup</a>
               </li>

               <li class="li"><a class="xref" href="#hiveserver2setup">Hive Server2 Setup</a>
               </li>

               <li class="li"><a class="xref" href="#hiveconfiguration">Hive Configuration</a>
               </li>

               <li class="li"><a class="xref" href="#hivepostinstallationconfiguration">Hive Post-installation Configuration</a>
               </li>

               <li class="li"><a class="xref" href="#hiveclientsetup">Hive Client Setup</a>
               </li>

            </ul>
</li>

         <li class="li"><a class="xref" href="#usinghive">Using Hive</a>
            <ul class="ul">
               <li class="li"><a class="xref" href="#startstophivemetastoreserver">Start/Stop Hive Metastore Server</a>
               </li>

               <li class="li"><a class="xref" href="#startstophiveserver">Start/Stop Hive Server</a>
               </li>

               <li class="li"><a class="xref" href="#startstophiveserver2">Start/Stop Hive Server2</a>
               </li>

               <li class="li"><a class="xref" href="#starthiveserverclient">Start HiveServer Client</a>
               </li>

               <li class="li"><a class="xref" href="#starthiveserver2client">Start HiveServer2 Client</a>
               </li>

            </ul>
</li>

      </ul>

   </div>

   <div class="related-links"/>
<div class="topic nested1" id="abouthive">
      <h2 class="title topictitle2">About Hive</h2>

      <div class="body">
         <p class="p">Hive is a data warehouse infrastructure that provides data summarization and ad hoc
            querying.</p>

         <p class="p">For more info, refer to the Apache Hive page: <a class="xref" href="http://hive.apache.org/">http://hive.apache.org/</a>
         </p>

      </div>

   </div>

   <div class="topic nested1" id="installinghive">
      <h2 class="title topictitle2">Installing Hive</h2>

      <div class="body">
         <p class="p">This section specifies how to install Hive.</p>

      </div>

   </div>

   <div class="topic nested1" id="hivecomponents">
      <h2 class="title topictitle2">Hive Components</h2>

      <div class="body">
         <p class="p">A Hive installation consists of the following components:</p>

         <ul class="ul">
            <li class="li">
               <samp class="ph codeph">hive-core</samp>
            </li>

            <li class="li">
               <samp class="ph codeph">hive-metastore</samp>
            </li>

            <li class="li">
               <samp class="ph codeph">hive-server</samp>
            </li>

            <li class="li">
               <samp class="ph codeph">hive-server2</samp>
            </li>

         </ul>

      </div>

   </div>

   <div class="topic nested1" id="prerequisites">
      <h2 class="title topictitle2">Prerequisites</h2>

      <div class="body">
         <p class="p">As Hive is built on top of Hadoop, HBase and Zookeeper, the Hadoop, HBase and Zookeeper
            core packages must be installed for Hive to operate correctly. The following
            prerequisites must be also met before installing Hive:</p>

         <ul class="ul">
            <li class="li">DB Server (we recommend using PostgresSQL)</li>

         </ul>

      </div>

   </div>

   <div class="topic nested1" id="hiverpmpackages">
      <h2 class="title topictitle2">Hive RPM Packages</h2>

      <div class="body">
         <p class="p">Hive consists of hive core, hive metastore daemon, hive server and hive server2
            packages:</p>

         
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
               
               
               <tbody class="tbody">
                  <tr class="row">
                     <td class="entry confluenceTd" colspan="2" valign="top"><strong class="ph b">hive-&lt;PHD_HIVE_VERSION&gt;-&lt;nn&gt;.noarch.rpm</strong>
                     </td>

                  </tr>

                  <tr class="row">
                     <td class="entry confluenceTd" valign="top"><strong class="ph b">Type</strong>
                     </td>

                     <td class="entry confluenceTd" valign="top">Core
                     </td>

                  </tr>

                  <tr class="row">
                     <td class="entry confluenceTd" valign="top"><strong class="ph b">Requires</strong>
                     </td>

                     <td class="entry confluenceTd" valign="top">Hadoop, HBase Core Packages
                     </td>

                  </tr>

                  <tr class="row">
                     <td class="entry confluenceTd" valign="top"><strong class="ph b">Description</strong>
                     </td>

                     <td class="entry confluenceTd" valign="top">Hive core package provides the executables, libraries, configuration
                           files and documentations.
                     </td>

                  </tr>

                  <tr class="row">
                     <td class="entry confluenceTd" valign="top"><strong class="ph b">Install on Nodes</strong>
                     </td>

                     <td class="entry confluenceTd" valign="top">Hive client, server workstation </td>

                  </tr>

               </tbody>

            </table>
</div>

         
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
               
               
               <tbody class="tbody">
                  <tr class="row">
                     <td class="entry confluenceTd" colspan="2" valign="top"><strong class="ph b">hive-server-&lt;PHD_HIVE_VERSION&gt;-&lt;nn&gt;.noarch.rpm</strong>
                     </td>

                  </tr>

                  <tr class="row">
                     <td class="entry confluenceTd" valign="top"><strong class="ph b">Type</strong>
                     </td>

                     <td class="entry confluenceTd" valign="top">Daemon (hive server)
                     </td>

                  </tr>

                  <tr class="row">
                     <td class="entry confluenceTd" valign="top"><strong class="ph b">Requires</strong>
                     </td>

                     <td class="entry confluenceTd" valign="top">Hive Core Package
                     </td>

                  </tr>

                  <tr class="row">
                     <td class="entry confluenceTd" valign="top"><strong class="ph b">Description</strong>
                     </td>

                     <td class="entry confluenceTd" valign="top">Daemon scripts package to provide Hive service through thrift.
                     </td>

                  </tr>

                  <tr class="row">
                     <td class="entry confluenceTd" valign="top"><strong class="ph b">Install on Nodes</strong>
                     </td>

                     <td class="entry confluenceTd" valign="top">Hive server node
                     </td>

                  </tr>

               </tbody>

            </table>
</div>

         
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
               
               
               <tbody class="tbody">
                  <tr class="row">
                     <td class="entry confluenceTd" colspan="2" valign="top"><strong class="ph b">hive-metastore-&lt;PHD_HIVE_VERSION&gt;-&lt;nn&gt;.noarch.rpm</strong>
                     </td>

                  </tr>

                  <tr class="row">
                     <td class="entry confluenceTd" valign="top"><strong class="ph b">Type</strong>
                     </td>

                     <td class="entry confluenceTd" valign="top">Deamon (Metastore server)
                     </td>

                  </tr>

                  <tr class="row">
                     <td class="entry confluenceTd" valign="top"><strong class="ph b">Requires</strong>
                     </td>

                     <td class="entry confluenceTd" valign="top">Hive Core Package
                     </td>

                  </tr>

                  <tr class="row">
                     <td class="entry confluenceTd" valign="top"><strong class="ph b">Description</strong>
                     </td>

                     <td class="entry confluenceTd" valign="top">Daemon scripts package to provide Hive metadata information through
                           metastore server.
                     </td>

                  </tr>

                  <tr class="row">
                     <td class="entry confluenceTd" valign="top"><strong class="ph b">Install on Nodes</strong>
                     </td>

                     <td class="entry confluenceTd" valign="top">Hive Metastore server node
                     </td>

                  </tr>

               </tbody>

            </table>
</div>

         
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all">
               
               
               <tbody class="tbody">
                  <tr class="row">
                     <td class="entry confluenceTd" colspan="2" valign="top"><strong class="ph b">hive-server2-&lt;PHD_HIVE_VERSION&gt;-&lt;nn&gt;.noarch.rpm</strong>
                     </td>

                  </tr>

                  <tr class="row">
                     <td class="entry confluenceTd" valign="top"><strong class="ph b">Type</strong>
                     </td>

                     <td class="entry confluenceTd" valign="top">Daemon (hive server2)
                     </td>

                  </tr>

                  <tr class="row">
                     <td class="entry confluenceTd" valign="top"><strong class="ph b">Requires</strong>
                     </td>

                     <td class="entry confluenceTd" valign="top">Hive Core Package
                     </td>

                  </tr>

                  <tr class="row">
                     <td class="entry confluenceTd" valign="top"><strong class="ph b">Description</strong>
                     </td>

                     <td class="entry confluenceTd" valign="top">Daemon scripts package to provide Hive Server2.
                     </td>

                  </tr>

                  <tr class="row">
                     <td class="entry confluenceTd" valign="top"><strong class="ph b">Install on Nodes</strong>
                     </td>

                     <td class="entry confluenceTd" valign="top">Hive server2 node
                     </td>

                  </tr>

               </tbody>

            </table>
</div>

      </div>

   </div>

   <div class="topic nested1" id="installingdbforhivemetastore">
      <h2 class="title topictitle2">Installing DB for Hive Metastore</h2>

      <div class="topic nested2" id="setupdbrecommendusingpostgresqlonthehivemetastorenode">
         <h3 class="title topictitle3">Set up DB (Recommend using PostgreSQL) on the hive metastore Node</h3>

         <div class="body">
            <ol class="ol" id="setupdbrecommendusingpostgresqlonthehivemetastorenode__ol_yhb_pdf_4p">
               <li class="li">Install postgresql-server on hive metastore node as root:
                  <pre class="pre codeblock">$ sudo yum install postgresql-server</pre>
</li>

               <li class="li">Initialize the database:
                  <pre class="pre codeblock">$ sudo service postgresql initdb</pre>
</li>

               <li class="li">Open the <span class="ph filepath">/var/lib/pgsql/data/postgresql.conf</span> file and set
                  the following values:
                  <pre class="pre codeblock">listen_addresses = '*'
standard_conforming_strings = off </pre>
</li>

               <li class="li">Open the<samp class="ph codeph"> /var/lib/pgsql/data/pg_hba.conf</samp> file and comment out
                  all the lines starting with <samp class="ph codeph">host</samp> and <samp class="ph codeph">local</samp> by
                  adding <samp class="ph codeph">#</samp> to start of the line.Then add the following lines:
                  <pre class="pre codeblock">local all all trust
host all all 0.0.0.0 0.0.0.0 trust</pre>
</li>

               <li class="li">Create the <samp class="ph codeph">/etc/sysconfig/pgsql/postgresql</samp> file and add the
                  following parameter/value pair: <pre class="pre codeblock">PGPORT=10432</pre>
</li>

               <li class="li">Disable SELinux (Security-Enhanced Linux):<p class="p">Check the state of
                     SELinux:</p>
<pre class="pre codeblock">$ getenforce
Enforcing</pre>
<p class="p">If the result is
                        <samp class="ph codeph">Enforcing</samp>, you need to disable it temporarily or
                     permanently.</p>
<p class="p">
                     <strong class="ph b">Either: Disable SELinux temporarily</strong>
                  </p>
<pre class="pre codeblock">$ sudo setenforce 0
$ getenforce
Permissive</pre>
<p class="p">
                     <strong class="ph b">Or: Disable SELinux permanently</strong>
                  </p>
<p class="p">(You will need to reboot your system to disable SELinux permanently, or
                     disable it temporarily as described above for the same
                  result.)</p>
<pre class="pre codeblock">$ sudo sed -i '/^[ ]*SELINUX[ ]*=.*$/d' /etc/selinux/config
$ echo "SELINUX=disabled" | sudo tee -a /etc/selinux/config
SELINUX=disabled
$ # reboot your system</pre>
</li>

               <li class="li">Start the database: <pre class="pre codeblock">$ sudo service postgresql start</pre>
</li>

               <li class="li">Create the user, <samp class="ph codeph">database</samp>:
                  <pre class="pre codeblock">$ sudo -u postgres createuser -p 10432 -D -S -R -P hive
$ sudo -u postgres createdb -p 10432 -O hive metastore </pre>
</li>

               <li class="li">Install the Hive Metastore RPM package following the step <a class="xref" href="#hivemetastoreserversetup__installhivemetastore">Install the
                     Hive Metastore</a>.</li>

               <li class="li">Run the postgres sql script to create hive schema in postgres db:
                  <pre class="pre codeblock">$ sudo -u postgres psql -p 10432 -d metastore -U hive -f /usr/lib/gphd/hive/scripts/metastore/upgrade/postgres/hive-schema-&lt;HIVE_VERSION&gt;.postgres.sql </pre>
</li>

            </ol>

         </div>

      </div>

   </div>

   <div class="topic nested1" id="hivemetastoreserversetup">
      <h2 class="title topictitle2">Hive MetaStore Server Setup</h2>

      <div class="body">
         <p class="p">Install the Hive core package and Hive Metastore daemon package to provide Hive metadata
            information through the centralized Metastore service.</p>

         <ol class="ol">
            <li class="li" id="hivemetastoreserversetup__installhivemetastore">Install the Hive metastore:
               <pre class="pre codeblock">$ sudo yum install postgresql-jdbc
$ sudo rpm -ivh working_dir/hive/rpm/hive-&lt;PHD_HIVE_VERSION&gt;-&lt;nn&gt;.noarch.rpm
$ sudo rpm -ivh working_dir/hive/rpm/hive-metastore-&lt;PHD_HIVE_VERSION&gt;-&lt;nn&gt;.noarch.rpm</pre>
</li>

            <li class="li">Open the <samp class="ph codeph">/etc/gphd/hive/conf/hive-site.xml</samp> and change it as
               follows:
                  <pre class="pre codeblock">&lt;configuration&gt;
 &lt;property&gt;
   &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;
   &lt;value&gt;hive&lt;/value&gt;
 &lt;/property&gt;
 &lt;property&gt;
   &lt;name&gt;hive.metastore.uris&lt;/name&gt;
   &lt;value&gt;thrift://&lt;CHANGE_TO_HIVE_METASTORE_ADDRESS&gt;:9083&lt;/value&gt;
 &lt;/property&gt;
 &lt;property&gt;
   &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;
   &lt;value&gt;jdbc:postgresql://&lt;CHANGE_TO_HIVE_METASTORE_ADDRESS&gt;:10432/metastore&lt;/value&gt;
 &lt;/property&gt;
 &lt;property&gt;
   &lt;name&gt;hive.hwi.war.file&lt;/name&gt;
   &lt;value&gt;/usr/lib/gphd/hive/lib/hive-hwi.war&lt;/value&gt;
 &lt;/property&gt;
 &lt;property&gt;
   &lt;name&gt;javax.jdo.option.ConnectionDriverName&lt;/name&gt;
   &lt;value&gt;org.postgresql.Driver&lt;/value&gt;
 &lt;/property&gt;
 &lt;property&gt;
   &lt;name&gt;datanucleus.autoCreateSchema&lt;/name&gt;
   &lt;value&gt;false&lt;/value&gt;
 &lt;/property&gt;
 &lt;property&gt;
   &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;
   &lt;value&gt;hive&lt;/value&gt;
 &lt;/property&gt;
 &lt;property&gt;
   &lt;name&gt;hive.metastore.execute.setugi&lt;/name&gt;
   &lt;value&gt;true&lt;/value&gt;
 &lt;/property&gt;
 &lt;/configuration&gt; </pre>
<div class="note note"><span class="notetitle">Note:</span> Replace
                     <samp class="ph codeph">&lt;CHANGE_TO_HIVE_METASTORE_ADDRESS&gt;</samp> in above file.</div>

            </li>

            <li class="li">Link the postgresql jar file:
               <pre class="pre codeblock">$ sudo ln -s /usr/share/java/postgresql-jdbc.jar /usr/lib/gphd/hive/lib/postgresql-jdbc.jar </pre>
</li>

            <li class="li">Start the hive-metastore:
               <pre class="pre codeblock">$ sudo service hive-metastore start</pre>
</li>

         </ol>

      </div>

   </div>

   <div class="topic nested1" id="hiveserversetup">
      <h2 class="title topictitle2">Hive Server Setup</h2>

      <div class="body">
         <p class="p"><strong class="ph b">[OPTIONAL]</strong>
         </p>

         <p class="p">Install the Hive core package and Hive server  package to provide Hive service:</p>

         <pre class="pre codeblock">$ sudo rpm -ivh working_dir/hive/rpm/hive-&lt;PHD_HIVE_VERSION&gt;-&lt;nn&gt;.noarch.rpm
$ sudo rpm -ivh working_dir/hive/rpm/hive-server-&lt;PHD_HIVE_VERSION&gt;-&lt;nn&gt;.noarch.rpm</pre>

      </div>

      <div class="topic nested2" id="setuppostgresqljdbcdriver">
         <h3 class="title topictitle3">Set up PostgreSQL jdbc driver</h3>

         <div class="body">
            <p class="p">Copy the <samp class="ph codeph">postgresql-jdbc.jar</samp> from the<samp class="ph codeph">
                  HIVE_METASTORE</samp> node  to <samp class="ph codeph">/usr/lib/gphd/hive/lib</samp> on the
                  <samp class="ph codeph">HIVE_SERVER</samp> node</p>

         </div>

      </div>

   </div>

   <div class="topic nested1" id="hiveserver2setup">
      <h2 class="title topictitle2">Hive Server2 Setup</h2>

      <div class="body">
         <p class="p"><strong class="ph b">[OPTIONAL]</strong>
         </p>

         <p class="p">Install the Hive core package and Hive server2 package to provide access to the Hive
            service:</p>

         <pre class="pre codeblock">$ sudo rpm -ivh working_dir/hive/rpm/hive-&lt;PHD_HIVE_VERSION&gt;-&lt;nn&gt;.noarch.rpm
$ sudo rpm -ivh working_dir/hive/rpm/hive-server2-&lt;PHD_HIVE_VERSION&gt;-&lt;nn&gt;.noarch.rpm</pre>

         <p class="p">Open the <samp class="ph codeph">/etc/gphd/hive/conf/hive-site.xml</samp> and add the following
            properties:</p>

         <pre class="pre codeblock">&lt;property&gt;
  &lt;name&gt;hive.server2.thrift.port&lt;/name&gt;
  &lt;value&gt;&lt;CHANGE_TO_HIVE_SERVER2_PORT&gt;&lt;/value&gt;
  &lt;description&gt;Port number of HiveServer2 Thrift interface.
  Can be overridden by setting $HIVE_SERVER2_THRIFT_PORT&lt;/description&gt;
&lt;/property&gt;
&lt;property&gt;
  &lt;name&gt;hive.server2.thrift.bind.host&lt;/name&gt;
  &lt;value&gt;&lt;CHANGE_TO_HIVE_SERVER2_HOSTNAME&gt;&lt;/value&gt;
  &lt;description&gt;Bind host on which to run the HiveServer2 Thrift interface.
  Can be overridden by setting $HIVE_SERVER2_THRIFT_BIND_HOST&lt;/description&gt;
&lt;/property&gt;</pre>

         <p class="p">
            <strong class="ph b">Note</strong>: Replace <samp class="ph codeph">&lt;CHANGE_TO_HIVE_SERVER2_PORT&gt; and
               &lt;CHANGE_TO_HIVE_SERVER2_HOSTNAME&gt;</samp> in above file.</p>

      </div>

      <div class="topic nested2" id="setuppostgresqljdbcdriver1">
         <h3 class="title topictitle3">Set up PostgreSQL jdbc driver</h3>

         <div class="body">
            <p class="p">Copy the <span class="ph filepath">postgresql-jdbc.jar</span> from the
                  <samp class="ph codeph">HIVE_METASTORE</samp>
                  node to <span class="ph filepath">/usr/lib/gphd/hive/lib</span> on the
                  <samp class="ph codeph">HIVE_SERVER2</samp> node.</p>

         </div>

      </div>

   </div>

   <div class="topic nested1" id="hiveconfiguration">
      <h2 class="title topictitle2">Hive Configuration</h2>

      <div class="body">
         <p class="p">The Hive configuration files are located in the following directory:</p>

         <p class="p">
            <span class="ph filepath">/etc/gphd/hive/conf/</span></p>

         <p class="p">You can make modifications to this configuration template or create your own.</p>

      </div>

   </div>

   <div class="topic nested1" id="hivepostinstallationconfiguration">
      <h2 class="title topictitle2">Hive Post-installation Configuration</h2>

      <div class="body">
         <ol class="ol">
            <li class="li">Login to one of the cluster nodes as root.</li>

            <li class="li">Create the
               <samp class="ph codeph">hive.warehouse.dir</samp>:<pre class="pre codeblock">$ sudo -u hdfs hadoop fs -mkdir -p /user/hive/warehouse</pre>
</li>

            <li class="li">Set permissions for the <samp class="ph codeph">hive.warehouse.dir</samp>
               :<pre class="pre codeblock">$ sudo -u hdfs hadoop fs -chmod 775 /user/hive/warehouse </pre>
</li>

            <li class="li">Set the ownership for the
               <samp class="ph codeph">hive.warehouse.dir</samp>:<pre class="pre codeblock">$ sudo -u hdfs hadoop fs -chown hive:hadoop /user/hive/warehouse</pre>
</li>

            <li class="li">Add the hive user to the hadoop group, if not already present, by running:
               <pre class="pre codeblock">$ sudo usermod -G hadoop hive </pre>
</li>

         </ol>

      </div>

   </div>

   <div class="topic nested1" id="hiveclientsetup">
      <h2 class="title topictitle2">Hive Client Setup</h2>

      <div class="body">
         <p class="p">Hive is a Hadoop client-side library. Install the Hive core package on the client
            workstation:</p>

         <pre class="pre codeblock"> $ sudo rpm -ivh working_dir/hive/rpm/hive-&lt;PHD_HIVE_VERSION&gt;-&lt;nn&gt;.noarch.rpm</pre>

      </div>

      <div class="topic nested2" id="setuppostgresqljdbcdriver2">
         <h3 class="title topictitle3">Set up PostgreSQL jdbc driver</h3>

         <div class="body">
            <p class="p">Copy the <span class="ph filepath">postgresql-jdbc.jar</span> from the
                  <samp class="ph codeph">HIVE_METASTORE</samp> node to
                  <span class="ph filepath">/usr/lib/gphd/hive/lib</span> on the <samp class="ph codeph">HIVE_CLIENT</samp>
               node.</p>

         </div>

      </div>

   </div>

   <div class="topic nested1" id="usinghive">
      <h2 class="title topictitle2">Using Hive</h2>

      <div class="topic nested2" id="startstophivemetastoreserver">
         <h3 class="title topictitle3">Start/Stop Hive Metastore Server</h3>

         <div class="body">
            <p class="p">Start/stop the Hive Metastore server daemon by running:</p>

            <pre class="pre codeblock">$ sudo service hive-metastore start
$ sudo service hive-metastore stop</pre>

            <p class="p">Or:</p>

            <pre class="pre codeblock">$ sudo /etc/init.d/hive-metastore start
$ sudo /etc/init.d/hive-metastore stop</pre>

         </div>

      </div>

      <div class="topic nested2" id="startstophiveserver">
         <h3 class="title topictitle3">Start/Stop Hive Server</h3>

         <div class="body">
            <p class="p"><strong class="ph b">[OPTIONAL]</strong>
            </p>

            <p class="p">Start/stop the Hive server daemon by running:</p>

            <pre class="pre codeblock">$ sudo service hive-server start
$ sudo service hive-server stop</pre>

         </div>

      </div>

      <div class="topic nested2" id="startstophiveserver2">
         <h3 class="title topictitle3">Start/Stop Hive Server2</h3>

         <div class="body">
            <p class="p"><strong class="ph b">[Optional]</strong>
            </p>

            <p class="p">Start/stop Hive server2 daemon by running:</p>

            <pre class="pre codeblock">$ sudo service hive-server2 start
$ sudo service hive-server2 stop</pre>

         </div>

      </div>

      <div class="topic nested2" id="starthiveserverclient">
         <h3 class="title topictitle3">Start HiveServer Client</h3>

         <div class="body">
            <p class="p">To run Hive on a client machine, use the <samp class="ph codeph">hive</samp> command directly in
               the shell:</p>

            <pre class="pre codeblock">$ hive</pre>

            <p class="p">For example:</p>

            <pre class="pre codeblock">$ hive -e "CREATE TABLE test(id string, name string);"
$ hive -e "show tables"
OK
test</pre>

         </div>

      </div>

      <div class="topic nested2" id="starthiveserver2client">
         <h3 class="title topictitle3">Start HiveServer2 Client</h3>

         <div class="body">
            <p class="p">HiveServer2 supports a new command shell <samp class="ph codeph">Beeline</samp> that works with
               HiveServer2:</p>

            <pre class="pre codeblock">$ beeline</pre>

            <p class="p">For example:</p>

            <pre class="pre codeblock">$ beeline
beeline&gt; !connect jdbc:hive2://&lt;hostname&gt;:&lt;port&gt; &lt;username&gt; &lt;password&gt; org.apache.hive.jdbc.HiveDriver
0: jdbc:hive2://localhost&gt; create table test1(id string, name string);
0: jdbc:hive2://localhost&gt; show tables;
+-----------+
| tab_name  |
+-----------+
| test      |
| test1     |
+-----------+</pre>

         </div>

      </div>

   </div>

<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../topics/ManuallyInstallingandUsingPivotalHD21Stack.html" title="Manually Installing and Using Pivotal HD 2.1 Stack"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Manually Installing and Using Pivotal HD 2.1 Stack</span></a></span>  </div><div>
<div class="container">
  <footer class="site-footer-links">
    <div class="copyright">
      <a href="http://docs.pivotal.io" target="_blank">Pivotal Documentation</a>
      © 2014 <a href="http://www.pivotal.io/" target="_blank">Pivotal Software</a>, Inc. All Rights Reserved.
  </div>
  <div class="support">
    Need help? <a href="http://support.pivotal.io" target="_blank">Visit Support</a>
   </div>
  </footer>
</div><!--end of container-->
</div>
</body>
</html>