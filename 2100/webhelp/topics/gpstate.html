
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="Shows the status of a running HAWQ system. Synopsis gpstate [ -d master_data_directory ] [ -B parallel_processes ] [ -s | -b | -Q ] [ -p ] [ -i ] [ -f ] [ -v | -q ] [ -l   log_directory ] gpstate -? | ..."/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="copyright" content="(C) Copyright 2005"/><meta name="DC.rights.owner" content="(C) Copyright 2005"/><meta name="DC.Type" content="topic"/><meta name="DC.Title" content="gpstate"/><meta name="DC.Relation" scheme="URI" content="../topics/ManagementUtilityReference.html"/><meta name="prodname" content=""/><meta name="version" content="2.1.0"/><meta name="release" content=""/><meta name="modification" content=""/><meta name="DC.Format" content="XHTML"/><meta name="DC.Identifier" content="topic1"/><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>gpstate</title><meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Type" content="text/html; charset=utf-8"><!----></meta><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/pivotal.css"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" id="topic1"><script xmlns="http://www.w3.org/1999/xhtml" src="//use.typekit.net/clb0qji.js" type="text/javascript"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			  try {
				  Typekit.load();
			  } catch (e) {
			  }
		  </script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			  document.domain = "pivotal.io";
		  </script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			WebFontConfig = {
			  google: { families: [ 'Source+Sans+Pro:300italic,400italic,300,400,600:latin' ] }
			};
			(function() {
			  var wf = document.createElement('script');
			  wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
				'://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
			  wf.type = 'text/javascript';
			  wf.async = 'true';
			  var s = document.getElementsByTagName('script')[0];
			  s.parentNode.insertBefore(wf, s);
			})();
		  </script>
<table class="nav"><tbody><tr><td colspan="2"><div id="permalink"><a href="#" title="Link to this page"/></div><div id="printlink"><a href="javascript:window.print();" title="Print this page"/></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../topics/../topics/HAWQAdministration.html" title="HAWQ Administration">HAWQ Administration</a> / <a class="navheader_parent_path" href="../topics/ManagementUtilityReference.html" title="Management Utility Reference">Management Utility Reference</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../topics/ManagementUtilityReference.html" title="Management Utility Reference"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Management Utility Reference</span></a></span>  </div></td></tr></tbody></table>

  <h1 class="title topictitle1">gpstate</h1>

  <div class="body">
    <p class="p">Shows the status of a running HAWQ system.</p>

    <div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2>
      
      <pre class="pre codeblock"><strong class="ph b">gpstate</strong> [<strong class="ph b">-d</strong> <var class="keyword varname">master_data_directory</var>] [<strong class="ph b">-B</strong> <var class="keyword varname">parallel_processes</var>] 
          [<strong class="ph b">-s</strong> | <strong class="ph b">-b</strong> | <strong class="ph b">-Q</strong>] [<strong class="ph b">-p</strong>] [<strong class="ph b">-i</strong>] [<strong class="ph b">-f</strong>] [<strong class="ph b">-v</strong> | <strong class="ph b">-q</strong>] 
          [<strong class="ph b">-l</strong> <var class="keyword varname">log_directory</var>]

<strong class="ph b">gpstate</strong> <strong class="ph b">-?</strong> | <strong class="ph b">-h</strong> | <strong class="ph b">--help</strong></pre>

    </div>

    <div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2>
      
      <p class="p">The <samp class="ph codeph">gpstate</samp> utility displays information about a running HAWQ instance.
        There is additional information you may want to know about a HAWQ system, since it is
        comprised of multiple database instances (segments) spanning multiple machines. The
          <samp class="ph codeph">gpstate</samp> utility provides additional status information for a HAWQ system,
        such as:</p>

      <ul class="ul">
        <li class="li" id="topic1__md136156">Which segments are down.</li>

        <li class="li" id="topic1__md136689">Master and segment configuration information (hosts, data directories,
          etc.).</li>

        <li class="li" id="topic1__md136182">The ports used by the system.</li>

      </ul>

    </div>

    <div class="section" id="topic1__section4"><h2 class="title sectiontitle">Options</h2>
      
      <dl class="dl parml">
        
          <dt class="dt pt dlterm">-b (brief status)</dt>

          <dd class="dd pd">Optional. Display a brief summary of the state of the HAWQ system. This is the default
            option.</dd>

        
        
          <dt class="dt pt dlterm">-B <var class="keyword varname">parallel_processes</var></dt>

          <dd class="dd pd">The number of segments to check in parallel. If not specified, the utility will start
            up to 60 parallel processes depending on how many segment instances it needs to
            check.</dd>

        
        
          <dt class="dt pt dlterm">-d <var class="keyword varname">master_data_directory</var></dt>

          <dd class="dd pd">Optional. The master data directory. If not specified, the value set for
              <samp class="ph codeph">$MASTER_DATA_DIRECTORY</samp> will be used.</dd>

        
        
          <dt class="dt pt dlterm">-f (show standby master details)</dt>

          <dd class="dd pd">Display details of the standby master host if configured.</dd>

        
        
          <dt class="dt pt dlterm">-i (show HAWQ version)</dt>

          <dd class="dd pd">Display the HAWQ software version information for each instance.</dd>

        
        
          <dt class="dt pt dlterm">-l <var class="keyword varname">logfile_directory</var></dt>

          <dd class="dd pd">The directory to write the log file. Defaults to <samp class="ph codeph">~/gpAdminLogs</samp>.</dd>

        
        
          <dt class="dt pt dlterm">-p (show ports)</dt>

          <dd class="dd pd">List the port numbers used throughout the HAWQ system.</dd>

        
        
          <dt class="dt pt dlterm">-q (no screen output)</dt>

          <dd class="dd pd">Optional. Run in quiet mode. Except for warning messages, command output is not
            displayed on the screen. However, this information is still written to the log
            file.</dd>

        
        
          <dt class="dt pt dlterm">-Q (quick status)</dt>

          <dd class="dd pd">Optional. Checks segment status in the system catalog on the master host. Does not
            poll the segments for status.</dd>

        
        
          <dt class="dt pt dlterm">-s (detailed status)</dt>

          <dd class="dd pd">Optional. Displays detailed status information for the HAWQ system.</dd>

        
        
          <dt class="dt pt dlterm">-v (verbose output)</dt>

          <dd class="dd pd">Optional. Displays error messages and outputs detailed status and progress
            information.</dd>

        
        
          <dt class="dt pt dlterm">-? | -h | --help (help)</dt>

          <dd class="dd pd">Displays the online help.</dd>

        
      </dl>

    </div>

    <div class="section" id="topic1__section5"><h2 class="title sectiontitle">Output Field Definitions</h2>
      
      <p class="p">The following output fields are reported by <samp class="ph codeph">gpstate -s</samp> for the master:</p>

      
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="topic1__md138854" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 1. gpstate output data for the master</span></caption>
          
          
          <thead class="thead" align="left">
            <tr class="row">
              <th class="entry" valign="top" width="166pt" id="d215714e276">Output Data</th>

              <th class="entry" valign="top" width="208pt" id="d215714e279">Description</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry" valign="top" width="166pt" headers="d215714e276 ">Master host</td>

              <td class="entry" valign="top" width="208pt" headers="d215714e279 ">Host name of the master</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="166pt" headers="d215714e276 ">Master process ID</td>

              <td class="entry" valign="top" width="208pt" headers="d215714e279 ">PID of the master database listener process</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="166pt" headers="d215714e276 ">Master data directory</td>

              <td class="entry" valign="top" width="208pt" headers="d215714e279 ">File system location of the master data directory</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="166pt" headers="d215714e276 ">Master port</td>

              <td class="entry" valign="top" width="208pt" headers="d215714e279 ">Port of the master <samp class="ph codeph">postgres</samp> database listener
                process</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="166pt" headers="d215714e276 ">Master current role</td>

              <td class="entry" valign="top" width="208pt" headers="d215714e279 ">dispatch = regular operating mode<p class="p">utility = maintenance mode
                </p>
</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="166pt" headers="d215714e276 ">HAWQ array configuration type</td>

              <td class="entry" valign="top" width="208pt" headers="d215714e279 ">Standard = one NIC per host <p class="p">Multi-Home = multiple NICs per
                  host</p>
</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="166pt" headers="d215714e276 ">HAWQ initsystem version</td>

              <td class="entry" valign="top" width="208pt" headers="d215714e279 ">Version of HAWQ when system was first initialized</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="166pt" headers="d215714e276 ">HAWQ current version</td>

              <td class="entry" valign="top" width="208pt" headers="d215714e279 ">Current version of HAWQ</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="166pt" headers="d215714e276 ">Postgres version</td>

              <td class="entry" valign="top" width="208pt" headers="d215714e279 ">version of Postgres that HAWQ is based on</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="166pt" headers="d215714e276 ">HAWQ mirroring status</td>

              <td class="entry" valign="top" width="208pt" headers="d215714e279 ">Physical mirroring, SAN or none</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="166pt" headers="d215714e276 ">Master standby</td>

              <td class="entry" valign="top" width="208pt" headers="d215714e279 ">Host name of the standby master</td>

            </tr>

          </tbody>

        </table>
</div>

      <p class="p">The following output fields are reported by <samp class="ph codeph">gpstate -s</samp> for each
        segment:</p>

      
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="topic1__md138181" class="table" frame="border" border="1" rules="all"><caption><span class="tablecap">Table 2. gpstate output data for segments</span></caption>
          
          
          <thead class="thead" align="left">
            <tr class="row">
              <th class="entry" valign="top" width="165pt" id="d215714e417">Output Data</th>

              <th class="entry" valign="top" width="209.25pt" id="d215714e420">Description</th>

            </tr>

          </thead>

          <tbody class="tbody">
            <tr class="row">
              <td class="entry" valign="top" width="165pt" headers="d215714e417 ">Hostname</td>

              <td class="entry" valign="top" width="209.25pt" headers="d215714e420 ">System-configured host name</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="165pt" headers="d215714e417 ">Address</td>

              <td class="entry" valign="top" width="209.25pt" headers="d215714e420 ">Network address host name (NIC name)</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="165pt" headers="d215714e417 ">Datadir</td>

              <td class="entry" valign="top" width="209.25pt" headers="d215714e420 ">File system location of segment data directory</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="165pt" headers="d215714e417 ">Port</td>

              <td class="entry" valign="top" width="209.25pt" headers="d215714e420 ">Port number of segment <samp class="ph codeph">postgres</samp> database
                listener process</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="165pt" headers="d215714e417 ">Current Role</td>

              <td class="entry" valign="top" width="209.25pt" headers="d215714e420 ">Current role of a segment: <var class="keyword varname">Primary</var></td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="165pt" headers="d215714e417 ">Preferred Role</td>

              <td class="entry" valign="top" width="209.25pt" headers="d215714e420 ">Role at system initialization time:
                <var class="keyword varname">Primary</var></td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="165pt" headers="d215714e417 ">File <samp class="ph codeph">postmaster.pid</samp></td>

              <td class="entry" valign="top" width="209.25pt" headers="d215714e420 ">Status of <samp class="ph codeph">postmaster.pid</samp> lock file:
                  <var class="keyword varname">Found</var> or <var class="keyword varname">Missing</var></td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="165pt" headers="d215714e417 ">PID from <samp class="ph codeph">postmaster.pid</samp> file</td>

              <td class="entry" valign="top" width="209.25pt" headers="d215714e420 ">PID found in the <samp class="ph codeph">postmaster.pid</samp> file</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="165pt" headers="d215714e417 ">Lock files in <samp class="ph codeph">/tmp</samp></td>

              <td class="entry" valign="top" width="209.25pt" headers="d215714e420 ">A segment port lock file for its <samp class="ph codeph">postgres</samp>
                process is created in <samp class="ph codeph">/tmp</samp> (file is removed when a segment shuts
                down)</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="165pt" headers="d215714e417 ">Active PID</td>

              <td class="entry" valign="top" width="209.25pt" headers="d215714e420 ">Active process ID of a segment</td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="165pt" headers="d215714e417 ">Master reports status as</td>

              <td class="entry" valign="top" width="209.25pt" headers="d215714e420 ">Segment status as reported in the system catalog:
                  <var class="keyword varname">Up</var> or <var class="keyword varname">Down</var></td>

            </tr>

            <tr class="row">
              <td class="entry" valign="top" width="165pt" headers="d215714e417 ">Database status</td>

              <td class="entry" valign="top" width="209.25pt" headers="d215714e420 ">Status of HAWQ to incoming requests: <var class="keyword varname">Up</var>,
                  <var class="keyword varname">Down</var>, or <var class="keyword varname">Suspended</var>. A
                  <var class="keyword varname">Suspended</var> state means database activity is temporarily paused
                while a segment transitions from one state to another.</td>

            </tr>

          </tbody>

        </table>
</div>

    </div>

    <div class="section" id="topic1__section6"><h2 class="title sectiontitle">Examples</h2>
      
      <p class="p">Show detailed status information of a HAWQ system:</p>

      <pre class="pre codeblock">gpstate -s</pre>

      <p class="p">Do a quick check for down segments in the master host system catalog:</p>

      <pre class="pre codeblock">gpstate -Q</pre>

      <p class="p">Show information about the standby master configuration:</p>

      <pre class="pre codeblock">gpstate -f</pre>

      <p class="p">Display the HAWQ software version information:</p>

      <pre class="pre codeblock">gpstate -I</pre>

    </div>

    <div class="section" id="topic1__section7"><h2 class="title sectiontitle">See Also</h2>
      
      <p class="p"><samp class="ph codeph"><a class="xref" href="gpstart.html">gpstart</a></samp>, <samp class="ph codeph"><a class="xref" href="gplogfilter.html">gplogfilter</a></samp></p>

    </div>

  </div>

<div class="related-links"/>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../topics/ManagementUtilityReference.html" title="Management Utility Reference"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">Management Utility Reference</span></a></span>  </div><div>
<div class="container">
  <footer class="site-footer-links">
    <div class="copyright">
      <a href="http://docs.pivotal.io" target="_blank">Pivotal Documentation</a>
      © 2014 <a href="http://www.pivotal.io/" target="_blank">Pivotal Software</a>, Inc. All Rights Reserved.
  </div>
  <div class="support">
    Need help? <a href="http://support.pivotal.io" target="_blank">Visit Support</a>
   </div>
  </footer>
</div><!--end of container-->
</div>
</body>
</html>