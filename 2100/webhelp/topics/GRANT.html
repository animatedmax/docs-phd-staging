
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="Defines access privileges. Synopsis GRANT { {SELECT | INSERT | UPDATE | DELETE | REFERENCES | TRIGGER } [,...] | ALL [PRIVILEGES] }     ON [TABLE] tablename [, ...]     TO { rolename | PUBLIC} [, ...] ..."/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="copyright" content="(C) Copyright 2005"/><meta name="DC.rights.owner" content="(C) Copyright 2005"/><meta name="DC.Type" content="topic"/><meta name="DC.Title" content="GRANT"/><meta name="DC.Relation" scheme="URI" content="../topics/SQLCommandReference.html"/><meta name="prodname" content=""/><meta name="version" content="2.1.0"/><meta name="release" content=""/><meta name="modification" content=""/><meta name="DC.Format" content="XHTML"/><meta name="DC.Identifier" content="topic1"/><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>GRANT</title><meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Type" content="text/html; charset=utf-8"><!----></meta><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/pivotal.css"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" id="topic1"><script xmlns="http://www.w3.org/1999/xhtml" src="//use.typekit.net/clb0qji.js" type="text/javascript"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			  try {
				  Typekit.load();
			  } catch (e) {
			  }
		  </script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			  document.domain = "pivotal.io";
		  </script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			WebFontConfig = {
			  google: { families: [ 'Source+Sans+Pro:300italic,400italic,300,400,600:latin' ] }
			};
			(function() {
			  var wf = document.createElement('script');
			  wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
				'://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
			  wf.type = 'text/javascript';
			  wf.async = 'true';
			  var s = document.getElementsByTagName('script')[0];
			  s.parentNode.insertBefore(wf, s);
			})();
		  </script>
<table class="nav"><tbody><tr><td colspan="2"><div id="permalink"><a href="#" title="Link to this page"/></div><div id="printlink"><a href="javascript:window.print();" title="Print this page"/></div></td></tr><tr><td width="75%"><a class="navheader_parent_path" href="../topics/../topics/HAWQAdministration.html" title="HAWQ Administration">HAWQ Administration</a> / <a class="navheader_parent_path" href="../topics/SQLCommandReference.html" title="SQL Command Reference">SQL Command Reference</a></td><td><div class="navheader">
<span class="navparent"><a class="link" href="../topics/SQLCommandReference.html" title="SQL Command Reference"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">SQL Command Reference</span></a></span>  </div></td></tr></tbody></table>

   <h1 class="title topictitle1">GRANT</h1>

   <div class="body">
      <p class="p" id="topic1__sql_command_desc">Defines access privileges.</p>

      <div class="section" id="topic1__section2"><h2 class="title sectiontitle">Synopsis</h2>
         
         <pre class="pre codeblock" id="topic1__sql_command_synopsis">GRANT { {SELECT | INSERT | UPDATE | DELETE | REFERENCES | 
TRIGGER } [,...] | ALL [PRIVILEGES] }
    ON [TABLE] <var class="keyword varname">tablename</var> [, ...]
    TO {<var class="keyword varname">rolename</var> | PUBLIC} [, ...] [WITH GRANT OPTION]

GRANT { {USAGE | SELECT | UPDATE} [,...] | ALL [PRIVILEGES] }
    ON SEQUENCE <var class="keyword varname">sequencename</var> [, ...]
    TO { <var class="keyword varname">rolename</var> | PUBLIC } [, ...] [WITH GRANT OPTION]

GRANT { {CREATE | CONNECT | TEMPORARY | TEMP} [,...] | ALL 
[PRIVILEGES] }
    ON DATABASE <var class="keyword varname">dbname</var> [, ...]
    TO {<var class="keyword varname">rolename</var> | PUBLIC} [, ...] [WITH GRANT OPTION]

GRANT { EXECUTE | ALL [PRIVILEGES] }
    ON FUNCTION <var class="keyword varname">funcname</var> ( [ [<var class="keyword varname">argmode</var>] [<var class="keyword varname">argname</var>] <var class="keyword varname">argtype</var> [, ...] 
    ] ) [, ...]
    TO {<var class="keyword varname">rolename</var> | PUBLIC} [, ...] [WITH GRANT OPTION]

GRANT { USAGE | ALL [PRIVILEGES] }
    ON LANGUAGE <var class="keyword varname">langname</var> [, ...]
    TO {<var class="keyword varname">rolename</var> | PUBLIC} [, ...] [WITH GRANT OPTION]

GRANT { {CREATE | USAGE} [,...] | ALL [PRIVILEGES] }
    ON SCHEMA <var class="keyword varname">schemaname</var> [, ...]
    TO {<var class="keyword varname">rolename</var> | PUBLIC} [, ...] [WITH GRANT OPTION]

GRANT { CREATE | ALL [PRIVILEGES] }
    ON TABLESPACE <var class="keyword varname">tablespacename</var> [, ...]
    TO {<var class="keyword varname">rolename</var> | PUBLIC} [, ...] [WITH GRANT OPTION]

GRANT <var class="keyword varname">parent_role</var> [, ...] 
    TO <var class="keyword varname">member_role</var> [, ...] [WITH ADMIN OPTION]

GRANT { SELECT | INSERT | ALL [PRIVILEGES] } 
    ON PROTOCOL <var class="keyword varname">protocolname</var>
    TO <var class="keyword varname">username</var>
         </pre>

      </div>

      <div class="section" id="topic1__section3"><h2 class="title sectiontitle">Description</h2>
         
         <p class="p">The <samp class="ph codeph">GRANT</samp> command has two
        basic variants: one that grants privileges on a database object (table, view, sequence,
        database, function, procedural language, schema, or tablespace), and one that grants
        membership in a role.</p>

         <div class="sectiondiv">
            <strong class="ph b">GRANT on Database Objects</strong>
            <p class="p">This variant of the <samp class="ph codeph">GRANT</samp> command gives specific privileges on a
          database object to one or more roles. These privileges are added to those already granted,
          if any. </p>

            <p class="p">The key word <samp class="ph codeph">PUBLIC</samp> indicates that the privileges are to
          be granted to all roles, including those that may be created later.
            <samp class="ph codeph">PUBLIC</samp> may be thought of as an implicitly defined group-level role that
          always includes all roles. Any particular role will have the sum of privileges granted
          directly to it, privileges granted to any role it is presently a member of, and privileges
          granted to <samp class="ph codeph">PUBLIC</samp>. </p>

            <p class="p">If <samp class="ph codeph">WITH GRANT OPTION</samp> is
          specified, the recipient of the privilege may in turn grant it to others. Without a grant
          option, the recipient cannot do that. Grant options cannot be granted to
            <samp class="ph codeph">PUBLIC</samp>. </p>

            <p class="p">There is no need to grant privileges to the owner of an
          object (usually the role that created it), as the owner has all privileges by default. The
          right to drop an object, or to alter its definition in any way is not described by a
          grantable privilege; it is inherent in the owner, and cannot be granted or revoked. The
          owner implicitly has all grant options for the object, too.</p>

            <p class="p">Depending on the type of
          object, the initial default privileges may include granting some privileges to
            <samp class="ph codeph">PUBLIC</samp>. The default is no public access for tables, schemas, and
          tablespaces; <samp class="ph codeph">CONNECT</samp> privilege and <samp class="ph codeph">TEMP</samp> table creation
          privilege for databases; <samp class="ph codeph">EXECUTE</samp> privilege for functions; and
            <samp class="ph codeph">USAGE</samp> privilege for languages. The object owner may of course revoke
          these privileges.</p>

         </div>
         <div class="sectiondiv">
            <strong class="ph b">GRANT on Roles</strong>
            <p class="p">This variant of the <samp class="ph codeph">GRANT</samp> command grants membership in a role to one or
          more other roles. Membership in a role is significant because it conveys the privileges
          granted to a role to each of its members. </p>

            <p class="p">If <samp class="ph codeph">WITH ADMIN OPTION</samp> is
          specified, the member may in turn grant membership in the role to others, and revoke
          membership in the role as well. Database superusers can grant or revoke membership in any
          role to anyone. Roles having <samp class="ph codeph">CREATE-ROLE</samp> privilege can grant or revoke
          membership in any role that is not a superuser.</p>

            <p class="p">Unlike the case with privileges,
          membership in a role cannot be granted to
        <samp class="ph codeph">PUBLIC</samp>.</p>

         </div>
         <div class="sectiondiv">
            <strong class="ph b">GRANT on Protocols</strong>
            <p class="p">After creating a custom protocol, specify <samp class="ph codeph">CREATE TRUSTED PROTOCOL</samp> to be
          able to allowing any user besides the owner to access it. If the protocol is not trusted,
          you cannot give any other user permission to use it to read or write data. After a
            <samp class="ph codeph">TRUSTED</samp> protocol is created, you can specify which other users can
          access it with the <samp class="ph codeph">GRANT</samp> command. </p>

            <ul class="ul">
               <li class="li" id="topic1__ds157703">To allow a user to create a readable external table with a trusted
            protocol<pre class="pre codeblock">GRANT SELECT ON PROTOCOL <var class="keyword varname">protocolname</var> TO <var class="keyword varname">username</var>
                  </pre>

               </li>

               <li class="li" id="topic1__ds157705">To allow a user to create a writable external table with a trusted
            protocol<pre class="pre codeblock">GRANT INSERT ON PROTOCOL <var class="keyword varname">protocolname</var> TO <var class="keyword varname">username</var>
                  </pre>

               </li>

               <li class="li" id="topic1__ds157707">To allow a user to create both readable and writable external table with
            a trusted
            protocol<pre class="pre codeblock">GRANT ALL ON PROTOCOL <var class="keyword varname">protocolname</var> TO <var class="keyword varname">username</var>
                  </pre>

               </li>

            </ul>

         </div>
      </div>

      <div class="section" id="topic1__section7"><h2 class="title sectiontitle">Parameters</h2>
         
         <dl class="dl parml">
            
               <dt class="dt pt dlterm">SELECT</dt>

               <dd class="dd pd">Allows <samp class="ph codeph">SELECT</samp> from any column of the specified table, view, or
            sequence. Also allows the use of <samp class="ph codeph">COPY TO</samp>. For sequences, this privilege
            also allows the use of the <samp class="ph codeph">currval</samp> function.</dd>

            
            
               <dt class="dt pt dlterm">INSERT</dt>

               <dd class="dd pd">Allows <samp class="ph codeph">INSERT</samp> of a new row into the specified table. Also allows
              <samp class="ph codeph">COPY FROM</samp>.</dd>

            
            
               <dt class="dt pt dlterm">UPDATE</dt>

               <dd class="dd pd">Allows <samp class="ph codeph">UPDATE</samp> of any column of the specified table. <samp class="ph codeph">SELECT
              ... FOR UPDATE</samp> and <samp class="ph codeph">SELECT ... FOR SHARE</samp> also require this
            privilege (as well as the <samp class="ph codeph">SELECT</samp> privilege). For sequences, this
            privilege allows the use of the <samp class="ph codeph">nextval</samp> and <samp class="ph codeph">setval</samp>
            functions.</dd>

            
            
               <dt class="dt pt dlterm">DELETE</dt>

               <dd class="dd pd">Allows <samp class="ph codeph">DELETE</samp> of a row from the specified table. </dd>

            
            
               <dt class="dt pt dlterm">REFERENCES</dt>

               <dd class="dd pd">This keyword is accepted, although foreign key constraints are currently not supported
            in HAWQ. To create a foreign key constraint, it is necessary to have this privilege on
            both the referencing and referenced tables.</dd>

            
            
               <dt class="dt pt dlterm">TRIGGER</dt>

               <dd class="dd pd">Allows the creation of a trigger on the specified table.<div class="note note"><span class="notetitle">Note:</span> HAWQ does not support
              triggers.</div>

               </dd>

            
            
               <dt class="dt pt dlterm">CREATE</dt>

               <dd class="dd pd">For databases, allows new schemas to be created within the database.</dd>

               <dd class="dd pd">For schemas, allows new objects to be created within the schema. To rename an existing
            object, you must own the object and have this privilege for the containing schema.</dd>

               <dd class="dd pd">For tablespaces, allows tables and indexes to be created within the tablespace, and
            allows databases to be created that have the tablespace as their default tablespace.
            (Note that revoking this privilege will not alter the placement of existing
            objects.)</dd>

            
            
               <dt class="dt pt dlterm">CONNECT</dt>

               <dd class="dd pd">Allows the user to connect to the specified database. This privilege is checked at
            connection startup (in addition to checking any restrictions imposed by
              <samp class="ph codeph">pg_hba.conf</samp>).</dd>

            
            
               <dt class="dt pt dlterm">TEMPORARY</dt>

               <dt class="dt pt dlterm">TEMP</dt>

               <dd class="dd pd">Allows temporary tables to be created while using the database.</dd>

            
            
               <dt class="dt pt dlterm">EXECUTE</dt>

               <dd class="dd pd">Allows the use of the specified function and the use of any operators that are
            implemented on top of the function. This is the only type of privilege that is
            applicable to functions. (This syntax works for aggregate functions, as well.) </dd>

            
            
               <dt class="dt pt dlterm">USAGE</dt>

               <dd class="dd pd">For procedural languages, allows the use of the specified language for the creation of
            functions in that language. This is the only type of privilege that is applicable to
            procedural languages.</dd>

               <dd class="dd pd">For schemas, allows access to objects contained in the specified schema (assuming that
            the objects' own privilege requirements are also met). Essentially this allows the
            grantee to look up objects within the schema.</dd>

               <dd class="dd pd">For sequences, this privilege allows the use of the <samp class="ph codeph">currval</samp> and
              <samp class="ph codeph">nextval</samp> functions. </dd>

            
            
               <dt class="dt pt dlterm">ALL PRIVILEGES</dt>

               <dd class="dd pd">Grant all of the available privileges at once. The <samp class="ph codeph">PRIVILEGES</samp> key
            word is optional in HAWQ, though it is required by strict SQL. </dd>

            
            
               <dt class="dt pt dlterm">PUBLIC</dt>

               <dd class="dd pd">A special group-level role that denotes that the privileges are to be granted to all
            roles, including those that may be created later. </dd>

            
            
               <dt class="dt pt dlterm">WITH GRANT OPTION</dt>

               <dd class="dd pd">The recipient of the privilege may in turn grant it to others.</dd>

            
            
               <dt class="dt pt dlterm">WITH ADMIN OPTION</dt>

               <dd class="dd pd">The member of a role may in turn grant membership in the role to others.</dd>

            
         </dl>

      </div>

      <div class="section" id="topic1__section8"><h2 class="title sectiontitle">Notes</h2>
         
         <p class="p">Database superusers can access all objects regardless of object privilege settings. One
        exception to this rule is view objects. Access to tables referenced in the view is
        determined by permissions of the view owner not the current user (even if the current user
        is a superuser).</p>

         <p class="p">If a superuser chooses to issue a <samp class="ph codeph">GRANT</samp> or <samp class="ph codeph">REVOKE</samp>
        command, the command is performed as though it were issued by the owner of the affected
        object. In particular, privileges granted via such a command will appear to have been
        granted by the object owner. For role membership, the membership appears to have been
        granted by the containing role itself. </p>

         <p class="p">
            <samp class="ph codeph">GRANT</samp> and <samp class="ph codeph">REVOKE</samp> can also be done by a role that is not
        the owner of the affected object, but is a member of the role that owns the object, or is a
        member of a role that holds privileges <samp class="ph codeph">WITH GRANT OPTION</samp> on the object. In
        this case the privileges will be recorded as having been granted by the role that actually
        owns the object or holds the privileges <samp class="ph codeph">WITH GRANT OPTION</samp>.</p>

         <p class="p">Granting permission on a table does not automatically extend permissions to any sequences
        used by the table, including sequences tied to <samp class="ph codeph">SERIAL</samp> columns. Permissions
        on a sequence must be set separately. </p>

         <p class="p">HAWQ does not support granting or revoking privileges for individual columns of a table.
        One possible workaround is to create a view having just the desired columns and then grant
        privileges to that view.</p>

         <p class="p">Use psql's <samp class="ph codeph">\z</samp> meta-command to obtain information about existing privileges
        for an object.</p>

      </div>

      <div class="section" id="topic1__section9"><h2 class="title sectiontitle">Examples</h2>
         
         <p class="p">Grant insert privilege to all roles on table <samp class="ph codeph">mytable</samp>: </p>

         <pre class="pre codeblock">GRANT INSERT ON mytable TO PUBLIC;</pre>

         <p class="p">Grant all available privileges to role <samp class="ph codeph">sally</samp> on the view
          <samp class="ph codeph">topten</samp>. Note that while the above will indeed grant all privileges if
        executed by a superuser or the owner of <samp class="ph codeph">topten</samp>, when executed by someone
        else it will only grant those permissions for which the granting role has grant options.</p>

         <pre class="pre codeblock">GRANT ALL PRIVILEGES ON topten TO sally;</pre>

         <p class="p">Grant membership in role <samp class="ph codeph">admins</samp> to user <samp class="ph codeph">joe</samp>: </p>

         <pre class="pre codeblock">GRANT admins TO joe;</pre>

      </div>

      <div class="section" id="topic1__section10"><h2 class="title sectiontitle">Compatibility</h2>
         
         <p class="p">The <samp class="ph codeph">PRIVILEGES</samp> key word in is required in the SQL standard, but optional
        in HAWQ. The SQL standard does not support setting the privileges on more than one object
        per command. </p>

         <p class="p">HAWQ allows an object owner to revoke his own ordinary privileges: for example, a table
        owner can make the table read-only to himself by revoking his own <samp class="ph codeph">INSERT</samp>,
          <samp class="ph codeph">UPDATE</samp>, and <samp class="ph codeph">DELETE</samp> privileges. This is not possible
        according to the SQL standard. HAWQ treats the owner's privileges as having been granted by
        the owner to himself; therefore he can revoke them too. In the SQL standard, the owner's
        privileges are granted by an assumed <em class="ph i">system</em> entity. </p>

         <p class="p">The SQL standard allows setting privileges for individual columns within a table.</p>

         <p class="p">The SQL standard provides for a <samp class="ph codeph">USAGE</samp> privilege on other kinds of objects:
        character sets, collations, translations, domains. </p>

         <p class="p">Privileges on databases, tablespaces, schemas, and languages are HAWQ extensions.</p>

      </div>

      <div class="section" id="topic1__section11"><h2 class="title sectiontitle">See Also</h2>
         
         <p class="p">
            <samp class="ph codeph">
               <a class="xref" href="REVOKE.html">REVOKE</a>
            </samp>
         </p>

      </div>

   </div>

<div class="related-links"/>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../topics/SQLCommandReference.html" title="SQL Command Reference"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">SQL Command Reference</span></a></span>  </div><div>
<div class="container">
  <footer class="site-footer-links">
    <div class="copyright">
      <a href="http://docs.pivotal.io" target="_blank">Pivotal Documentation</a>
      © 2014 <a href="http://www.pivotal.io/" target="_blank">Pivotal Software</a>, Inc. All Rights Reserved.
  </div>
  <div class="support">
    Need help? <a href="http://support.pivotal.io" target="_blank">Visit Support</a>
   </div>
  </footer>
</div><!--end of container-->
</div>
</body>
</html>