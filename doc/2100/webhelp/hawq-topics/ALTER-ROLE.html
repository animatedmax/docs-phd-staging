
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en-us" lang="en-us">
<head><meta xmlns="http://www.w3.org/1999/xhtml" name="description" content="Changes a database role (user or group). Synopsis ALTER ROLE name RENAME TO newname ALTER ROLE name RESET config_parameter ALTER ROLE name RESOURCE QUEUE { queue_name | NONE} ALTER ROLE name [ [WITH] ..."/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="copyright" content="(C) Copyright 2005"/><meta name="DC.rights.owner" content="(C) Copyright 2005"/><meta name="DC.Type" content="topic"/><meta name="DC.Title" content="ALTER ROLE"/><meta name="DC.Relation" scheme="URI" content="../hawq-topics/SQLCommandReference.html"/><meta name="prodname" content=""/><meta name="version" content="2.1.0"/><meta name="release" content=""/><meta name="modification" content=""/><meta name="DC.Format" content="XHTML"/><meta name="DC.Identifier" content="alterrole"/><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><title>ALTER ROLE</title><meta xmlns="http://www.w3.org/1999/xhtml" http-equiv="Content-Type" content="text/html; charset=utf-8"><!----></meta><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/commonltr.css"><!----></link><link xmlns="http://www.w3.org/1999/xhtml" rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/webhelp_topic.css"><!----></link><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/resources/css/pivotal.css"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript"><!--
          
          var prefix = "../index.html";
          
          --></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-1.8.2.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery.cookie.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" src="../oxygen-webhelp/resources/js/jquery-ui.custom.min.js"><!----></script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript" charset="utf-8" src="../oxygen-webhelp/resources/js/webhelp_topic.js"><!----></script></head>
<body onload="highlightSearchTerm()" id="alterrole"><script xmlns="http://www.w3.org/1999/xhtml" src="//use.typekit.net/clb0qji.js" type="text/javascript"/><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			  try {
				  Typekit.load();
			  } catch (e) {
			  }
		  </script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			  document.domain = "pivotal.io";
		  </script><script xmlns="http://www.w3.org/1999/xhtml" type="text/javascript">
			WebFontConfig = {
			  google: { families: [ 'Source+Sans+Pro:300italic,400italic,300,400,600:latin' ] }
			};
			(function() {
			  var wf = document.createElement('script');
			  wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
				'://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
			  wf.type = 'text/javascript';
			  wf.async = 'true';
			  var s = document.getElementsByTagName('script')[0];
			  s.parentNode.insertBefore(wf, s);
			})();
		  </script>
<table class="nav"><tbody><tr><td colspan="2"><div id="permalink"><a href="#">linkToThis</a></div><div id="printlink"><a href="javascript:window.print();">printThisPage</a></div></td></tr><tr><td><div class="navheader">
<span class="navparent"><a class="link" href="../hawq-topics/SQLCommandReference.html" title="SQL Command Reference"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">SQL Command Reference</span></a></span>  </div></td><td width="75%"><a class="navheader_parent_path" href="../hawq-topics/../hawq-topics/HAWQAdministration.html" title="HAWQ Administration">HAWQ Administration</a> / <a class="navheader_parent_path" href="../hawq-topics/SQLCommandReference.html" title="SQL Command Reference">SQL Command Reference</a></td></tr></tbody></table>

   <h1 class="title topictitle1">ALTER ROLE</h1>

   <div class="body">
      <p class="p">Changes a database role (user or group).</p>

      <div class="section" id="alterrole__section2"><h2 class="title sectiontitle">Synopsis</h2>
         
         <pre class="pre codeblock" id="alterrole__sql_command_synopsis">ALTER ROLE <var class="keyword varname">name</var> RENAME TO <var class="keyword varname">newname</var>

ALTER ROLE <var class="keyword varname">name</var> RESET <var class="keyword varname">config_parameter</var>

ALTER ROLE <var class="keyword varname">name</var> RESOURCE QUEUE {<var class="keyword varname">queue_name</var> | NONE}

ALTER ROLE <var class="keyword varname">name</var> [ [WITH] <var class="keyword varname">option</var> [ ... ] ]</pre>

         <p class="p">where <var class="keyword varname">option</var> can be:</p>

         <pre class="pre codeblock">      SUPERUSER | NOSUPERUSER
    | CREATEDB | NOCREATEDB
    | CREATE-ROLE | NOCREATE-ROLE
    | CREATEEXTTABLE | NOCREATEEXTTABLE 
      [ ( <var class="keyword varname">attribute</var>='<var class="keyword varname">value</var>'[, ...] ) ]
           where <var class="keyword varname">attributes</var> and <var class="keyword varname">value</var> are:
           type='readable'|'writable'
           protocol='gpfdist'|'http'

    | INHERIT | NOINHERIT
    | LOGIN | NOLOGIN
    | CONNECTION LIMIT <var class="keyword varname">connlimit</var>
    | [ENCRYPTED | UNENCRYPTED] PASSWORD '<var class="keyword varname">password</var>'
    | VALID UNTIL '<var class="keyword varname">timestamp</var>'
    | [ DENY <var class="keyword varname">deny_point</var> ]
    | [ DENY BETWEEN <var class="keyword varname">deny_point</var> AND <var class="keyword varname">deny_point</var>]
    | [ DROP DENY FOR <var class="keyword varname">deny_point</var> ]</pre>

      </div>

      <div class="section"><h2 class="title sectiontitle">Description</h2>
         
         <p class="p">
            <samp class="ph codeph">ALTER ROLE</samp> changes the attributes of a HAWQ role. There are several
            variants of this command:</p>

         <ul class="ul">
            <li class="li">
               <strong class="ph b">RENAME</strong> — Changes the name of the role. Database superusers can rename any
               role. Roles having <samp class="ph codeph">CREATE-ROLE</samp> privilege can rename non-superuser
               roles. The current session user cannot be renamed (connect as a different user to
               rename a role). Because MD5-encrypted passwords use the role name as cryptographic
               salt, renaming a role clears its password if the password is MD5-encrypted.</li>

            <li class="li">
               <strong class="ph b">SET | RESET</strong> — changes a role’s session default for a specified configuration
               parameter. Whenever the role subsequently starts a new session, the specified value
               becomes the session default, overriding whatever setting is present in server
               configuration file (postgresql.conf). For a role without LOGIN privilege, session
               defaults have no effect. Ordinary roles can change their own session defaults.
               Superusers can change anyone’s session defaults. Roles having
                  <samp class="ph codeph">CREATE-ROLE</samp> privilege can change defaults for non-superuser roles.
               See "Server Configuration Parameters"  for more information on all user-settable
               configuration parameters.</li>

            <li class="li">
               <strong class="ph b">RESOURCE QUEUE</strong> — Assigns the role to a workload management resource queue. The
               role would then be subject to the limits assigned to the resource queue when issuing
               queries. Specify <samp class="ph codeph">NONE</samp> to assign the role to the default resource
               queue. A role can only belong to one resource queue. For a role without
                  <samp class="ph codeph">LOGIN</samp> privilege, resource queues have no effect. See
                     <samp class="ph codeph"><a class="xref" href="CREATE-RESOURCE-QUEUE.html#topic1">CREATE RESOURCE QUEUE</a></samp> for more
               information.</li>

            <li class="li">
               <strong class="ph b">WITH</strong>
               <var class="keyword varname">option</var> — Changes many of the role attributes that can be specified
               in <samp class="ph codeph">
                  <a class="xref" href="CREATE-ROLE.html">CREATE ROLE</a>
               </samp>. Attributes not mentioned in the
               command retain their previous settings. Database superusers can change any of these
               settings for any role. Roles having <samp class="ph codeph">CREATE-ROLE</samp> privilege can change
               any of these settings, but only for non-superuser roles. Ordinary roles can only
               change their own password.</li>

         </ul>

      </div>

      <div class="section" id="alterrole__section4"><h2 class="title sectiontitle">Parameters</h2>
         
         <dl class="dl parml">
            
               <dt class="dt pt dlterm">
                  <var class="keyword varname">name</var>
               </dt>

               <dd class="dd pd">The name of the role whose attributes are to be altered. </dd>

            
            
               <dt class="dt pt dlterm">
                  <var class="keyword varname">newname</var>
               </dt>

               <dd class="dd pd">The new name of the role. </dd>

            
            
               <dt class="dt pt dlterm">
                  <var class="keyword varname">config_parameter=value</var>
               </dt>

               <dd class="dd pd">Set this role's session default for the specified configuration parameter to the
                  given value. If value is <samp class="ph codeph">DEFAULT</samp> or if <samp class="ph codeph">RESET</samp> is
                  used, the role-specific variable setting is removed, so the role will inherit the
                  system-wide default setting in new sessions. Use <samp class="ph codeph">RESET ALL</samp> to
                  clear all role-specific settings. See <samp class="ph codeph">
                     <a class="xref" href="SET.html">SET</a>
                  </samp>
                  and <a class="xref" href="HAWQServerConfigurationParameters.html#hawqserverconfigurationparameters">HAWQ Server Configuration Parameters</a> for information about user-settable configuration parameters. </dd>

            
            
               <dt class="dt pt dlterm">
                  <var class="keyword varname">queue_name</var>
               </dt>

               <dd class="dd pd">The name of the resource queue to which the user-level role is to be assigned.
                  Only roles with <samp class="ph codeph">LOGIN</samp> privilege can be assigned to a resource
                  queue. To unassign a role from a resource queue and put it in the default resource
                  queue, specify <samp class="ph codeph">NONE</samp>. A role can only belong to one resource
                  queue.</dd>

            
            
               <dt class="dt pt dlterm">SUPERUSER | NOSUPERUSER</dt>

               <dt class="dt pt dlterm">CREATEDB | NOCREATEDB</dt>

               <dt class="dt pt dlterm">CREATE-ROLE | NOCREATE-ROLE</dt>

               <dt class="dt pt dlterm">CREATEEXTTABLE | NOCREATEEXTTABLE
                     [(<var class="keyword varname">attribute</var>='<var class="keyword varname">value</var>')]</dt>

               <dd class="dd pd">If <samp class="ph codeph">CREATEEXTTABLE</samp> is specified, the role being defined is
                  allowed to create external tables. The default <samp class="ph codeph">type</samp> is
                     <samp class="ph codeph">readable</samp> and the default <samp class="ph codeph">protocol</samp> is
                     <samp class="ph codeph">gpfdist</samp> if not specified. <samp class="ph codeph">NOCREATEEXTTABLE</samp>
                  (the default) denies the role the ability to create external tables. Note that
                  external tables that use the <samp class="ph codeph">file</samp> or <samp class="ph codeph">execute</samp>
                  protocols can only be created by superusers.</dd>

            
            
               <dt class="dt pt dlterm">INHERIT | NOINHERIT</dt>

               <dt class="dt pt dlterm">LOGIN | NOLOGIN</dt>

               <dt class="dt pt dlterm">CONNECTION LIMIT <var class="keyword varname">connlimit</var>
               </dt>

               <dt class="dt pt dlterm">PASSWORD '<var class="keyword varname">password</var>'</dt>

               <dt class="dt pt dlterm">ENCRYPTED | UNENCRYPTED</dt>

               <dt class="dt pt dlterm">VALID UNTIL '<var class="keyword varname">timestamp</var>'</dt>

               <dd class="dd pd">These clauses alter role attributes originally set by <samp class="ph codeph">
                     <a class="xref" href="CREATE-ROLE.html">CREATE ROLE</a>
                  </samp>. </dd>

            
            
               <dt class="dt pt dlterm">DENY <var class="keyword varname">deny_point</var>
               </dt>

               <dt class="dt pt dlterm">DENY BETWEEN <var class="keyword varname">deny_point</var> AND <var class="keyword varname">deny_point</var>
               </dt>

               <dd class="dd pd">The <samp class="ph codeph">DENY</samp> and <samp class="ph codeph">DENY BETWEEN</samp> keywords set
                  time-based constraints that are enforced at login. <samp class="ph codeph">DENY</samp>sets a day
                  or a day and time to deny access. <samp class="ph codeph">DENY BETWEEN</samp> sets an interval
                  during which access is denied. Both use the parameter
                     <var class="keyword varname">deny_point</var> that has following
                  format:<pre class="pre codeblock">DAY <var class="keyword varname">day</var> [ TIME '<var class="keyword varname">time</var>' ]</pre>

               </dd>

               <dd class="dd pd">The two parts of the <samp class="ph codeph">deny_point</samp> parameter use the following
                     formats:<p class="p">For
                     <var class="keyword varname">day</var>:</p>

                  <pre class="pre codeblock">{'Sunday' | 'Monday' | 'Tuesday' |'Wednesday' | 'Thursday' | 'Friday' | 
'Saturday' | 0-6 }</pre>

                  <p class="p">For
                        <var class="keyword varname">time</var>:</p>

                  <div class="p">
                     <pre class="pre codeblock">{ 00-23 : 00-59 | 01-12 : 00-59 { AM | PM }}</pre>

                  </div>

               </dd>

               <dd class="dd pd">The <samp class="ph codeph">DENY BETWEEN</samp> clause uses two <var class="keyword varname">deny_point</var>
                  parameters.</dd>

               <dd class="dd pd">
                  <pre class="pre codeblock">DENY BETWEEN <var class="keyword varname">deny_point</var> AND <var class="keyword varname">deny_point</var>
                  </pre>

               </dd>

            
            
               <dt class="dt pt dlterm">DROP DENY FOR <var class="keyword varname">deny_point</var>
               </dt>

               <dd class="dd pd">The <samp class="ph codeph">DROP DENY FOR</samp> clause removes a time-based constraint from
                  the role. It uses the <var class="keyword varname">deny_point</var> parameter described above.
               </dd>

            
         </dl>

      </div>

      <div class="section"><h2 class="title sectiontitle">Notes</h2>
         
         <p class="p">Use <samp class="ph codeph">GRANT</samp> and <samp class="ph codeph">REVOKE</samp> for adding and removing role
            memberships.</p>

         <p class="p">Caution must be exercised when specifying an unencrypted password with this command. The
            password will be transmitted to the server in clear text, and it might also be logged in
            the client’s command history or the server log. The <samp class="ph codeph">psql</samp> command-line
            client contains a meta-command <samp class="ph codeph">\password</samp> that can be used to safely
            change a role’s password.</p>

         <p class="p">It is also possible to tie a session default to a specific database rather than to a
            role. Role-specific settings override database-specific ones if there is a conflict.</p>

      </div>

      <div class="section"><h2 class="title sectiontitle">Examples</h2>
         
         <p class="p">Change the password for a role:</p>

         <pre class="pre codeblock">ALTER ROLE daria WITH PASSWORD 'passwd123';</pre>

         <p class="p">Change a password expiration date:</p>

         <pre class="pre codeblock">ALTER ROLE scott VALID UNTIL 'May 4 12:00:00 2015 +1';</pre>

         <p class="p">Make a password valid forever:</p>

         <pre class="pre codeblock">ALTER ROLE luke VALID UNTIL 'infinity';</pre>

         <p class="p">Give a role the ability to create other roles and new databases:</p>

         <pre class="pre codeblock">ALTER ROLE joelle CREATE-ROLE CREATEDB;</pre>

         <p class="p">Give a role a non-default setting of the <samp class="ph codeph">maintenance_work_mem</samp>
            parameter:</p>

         <pre class="pre codeblock">ALTER ROLE admin SET maintenance_work_mem = 100000;</pre>

         <p class="p">Assign a role to a resource queue:</p>

         <pre class="pre codeblock">ALTER ROLE sammy RESOURCE QUEUE poweruser;</pre>

         <p class="p">Give a role permission to create writable external tables:</p>

         <pre class="pre codeblock">ALTER ROLE load CREATEEXTTABLE (type='writable');</pre>

         <p class="p">Alter a role so it does not allow login access on Sundays:</p>

         <pre class="pre codeblock">ALTER ROLE user3 DENY DAY 'Sunday';</pre>

         <p class="p">Alter a role to remove the constraint that does not allow login access on Sundays:</p>

         <pre class="pre codeblock">ALTER ROLE user3 DROP DENY FOR DAY 'Sunday';</pre>

      </div>

      <div class="section"><h2 class="title sectiontitle">Compatibility</h2>
         
         <p class="p">The <samp class="ph codeph">ALTER ROLE</samp> statement is a HAWQ extension.</p>

      </div>

      <div class="section"><h2 class="title sectiontitle">See Also</h2>
         
         <p class="p">
            <samp class="ph codeph">
               <a class="xref" href="CREATE-ROLE.html">CREATE ROLE</a>
            </samp>, <samp class="ph codeph">
               <a class="xref" href="DROP-ROLE.html">DROP ROLE</a>
            </samp>, <samp class="ph codeph">
               <a class="xref" href="SET.html">SET</a>
            </samp>, <samp class="ph codeph">
               <a class="xref" href="CREATE-RESOURCE-QUEUE.html">CREATE RESOURCE QUEUE</a>
            </samp>, <samp class="ph codeph">
               <a class="xref" href="GRANT.html">GRANT</a>
            </samp>, <samp class="ph codeph">
               <a class="xref" href="REVOKE.html">REVOKE</a>
            </samp> </p>

      </div>

   </div>

<div class="related-links"/>
<div class="navfooter"><!---->
<span class="navparent"><a class="link" href="../hawq-topics/SQLCommandReference.html" title="SQL Command Reference"><span class="navheader_label">Parent topic</span><span class="navheader_separator">: </span><span class="navheader_linktext">SQL Command Reference</span></a></span>  </div><div>
<div class="container">
  <footer class="site-footer-links">
    <div class="copyright">
      <a href="http://docs.pivotal.io" target="_blank">Pivotal Documentation</a>
      © 2014 <a href="http://www.pivotal.io/" target="_blank">Pivotal Software</a>, Inc. All Rights Reserved.
  </div>
  <div class="support">
    Need help? <a href="http://support.pivotal.io" target="_blank">Visit Support</a>
   </div>
  </footer>
</div><!--end of container-->
</div>
</body>
</html>